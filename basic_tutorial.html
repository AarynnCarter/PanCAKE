<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Basic Tutorial &mdash; PanCAKE 0.0.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Scene" href="scene.html" />
    <link rel="prev" title="Installation" href="install.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> PanCAKE
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">Welcome to PanCAKE’s documentation!</a></li>
</ul>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Basic Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="scene.html">Astrophysical Scene Constuction</a></li>
<li class="toctree-l1"><a class="reference internal" href="sequence.html">Observational Sequence Constuction</a></li>
<li class="toctree-l1"><a class="reference internal" href="simulation.html">Simulation Execution</a></li>
<li class="toctree-l1"><a class="reference internal" href="postprocessing.html">Postprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PanCAKE</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Basic Tutorial</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/basic_tutorial.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="basic-tutorial">
<h1>Basic Tutorial<a class="headerlink" href="#basic-tutorial" title="Permalink to this headline"></a></h1>
<p>All simulations with the PanCAKE package are performed through four primary stages: Astrophysical Scene Construction, Observational Sequence Construction, Simulation Execution, and Postprocessing. In this tutorial we will cover a basic implementation of each of these stages. For more advanced use cases, please refer to the relevant tabs in the contents (coming soon).</p>
<p>To begin, like all other Python packages, we must import PanCAKE:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pancake</span>
</pre></div>
</div>
<p>From here we have full access to PanCAKE’s functionality, and can begin by performing the Astrophysical Scene Constuction. In this case, we would like two separate scenes of a ‘Target’ scene (HIP 65426) and a ‘Reference’ scene (HIP 68245):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Define the target scene</span>
<span class="n">target</span> <span class="o">=</span> <span class="n">pancake</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">Scene</span><span class="p">(</span><span class="s1">&#39;Target&#39;</span><span class="p">)</span>
<span class="n">target</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="s1">&#39;HIP 65426&#39;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;simbad&#39;</span><span class="p">)</span>

<span class="c1"># Define the reference scene</span>
<span class="n">reference</span> <span class="o">=</span> <span class="n">pancake</span><span class="o">.</span><span class="n">scene</span><span class="o">.</span><span class="n">Scene</span><span class="p">(</span><span class="s1">&#39;Reference&#39;</span><span class="p">)</span>
<span class="n">reference</span><span class="o">.</span><span class="n">add_source</span><span class="p">(</span><span class="s1">&#39;HIP 68245&#39;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;simbad&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Here we have simply initialised both scenes, provided a descriptive name for each, and then added sources to these scenes using <a class="reference external" href="http://simbad.u-strasbg.fr/simbad/">SIMBAD</a> queries based on their names. In this case, no other user information is required. Alternative methods of adding sources to scenes, such as an input file, are described in the Astrophysical Scene Construction tab.</p>
<p>With all the necessary scenes defined, we can move on to the Observational Sequence Construction. To do this we simply initialise a sequence, and then add observations of our scenes in the chronological order in which we would like them to occur. In this case, we will be performing an observation in the NIRCam F444W and MIRI F1550C filters for both the Target and Reference scenes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># Initialise an observational sequence</span>
<span class="n">seq</span> <span class="o">=</span> <span class="n">pancake</span><span class="o">.</span><span class="n">sequence</span><span class="o">.</span><span class="n">Sequence</span><span class="p">()</span>

<span class="c1"># Add target and reference observations</span>
<span class="n">seq</span><span class="o">.</span><span class="n">add_observation</span><span class="p">(</span><span class="n">target</span><span class="p">,</span> <span class="n">exposures</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;F444W&#39;</span><span class="p">,</span> <span class="s1">&#39;optimise&#39;</span><span class="p">,</span> <span class="mi">3600</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;F1550C&#39;</span><span class="p">,</span> <span class="s1">&#39;optimise&#39;</span><span class="p">,</span> <span class="mi">3600</span><span class="p">)],</span> <span class="n">nircam_mask</span><span class="o">=</span><span class="s1">&#39;MASK335R&#39;</span><span class="p">,</span> <span class="n">rolls</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">14</span><span class="p">])</span>
<span class="n">seq</span><span class="o">.</span><span class="n">add_observation</span><span class="p">(</span><span class="n">reference</span><span class="p">,</span> <span class="n">exposures</span><span class="o">=</span><span class="p">[(</span><span class="s1">&#39;F444W&#39;</span><span class="p">,</span> <span class="s1">&#39;optimise&#39;</span><span class="p">,</span> <span class="mi">3600</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;F1550C&#39;</span><span class="p">,</span> <span class="s1">&#39;optimise&#39;</span><span class="p">,</span> <span class="mi">3600</span><span class="p">)],</span> <span class="n">scale_exposures</span><span class="o">=</span><span class="n">target</span><span class="p">,</span> <span class="n">nircam_mask</span><span class="o">=</span><span class="s1">&#39;MASK335R&#39;</span><span class="p">,</span> <span class="n">nircam_sgd</span><span class="o">=</span><span class="s1">&#39;9-POINT-CIRCLE&#39;</span><span class="p">,</span> <span class="n">miri_sgd</span><span class="o">=</span><span class="s1">&#39;9-POINT-SMALL-GRID&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Here the exposures have been defined using an ‘optimise’ string, followed by the duration of the observation in seconds. In such a case, PanCAKE will attempt to compute ‘optimal’ readout parameters for this observation, report these back to the user, and use these for future simulations. Note that the instrument does not need to be provided, as this can be identified by the input filter. Defining exposures using precise readout parameters is also possible, and follows the construction (FILTER, PATTERN, NGROUP, NINT).</p>
<p>For all NIRCam simulations the desired coronagraphic mask must be specified, whereas for MIRI these are tied to the chosen filter, and do not need to be specified. For the target, multiple roll angles have been defined to allow for ADI PSF subtraction, and for the reference small-grid dither patterns have been specified to allow for RDI PSF subtraction. Finally, in this case we will scale the reference exposures relative to the target to account for the flux difference between the two stars.</p>
<p>At this stage it is important to note that (aside from computational restrictions) there is no limit to the number of scenes, or number of observations, that can be included within a given sequence.</p>
<p>With the sequence fully defined, all relevant simulations can be performed with a single line of code:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">results</span> <span class="o">=</span> <span class="n">seq</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">save_file</span><span class="o">=</span><span class="s1">&#39;simulations.fits&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>In this case, we are performing the most basic simulation possible, with no wavefront evolution, or on-the-fly PSF calculation. We have also specified a file to save the simulations to as they are performed. Further description of advanced simulation capabilities and considerations is provided in the Simulation Execution tab.</p>
<img alt="_images/raw_images_website.png" src="_images/raw_images_website.png" />
<p>Finally, with the simulations completed, we can perform postprocessing within PanCAKE and compute contrast curves based on different PSF subtraction strategies:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pancake</span><span class="o">.</span><span class="n">analysis</span><span class="o">.</span><span class="n">contrast_curve</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s1">&#39;Target&#39;</span><span class="p">,</span> <span class="n">references</span><span class="o">=</span><span class="s1">&#39;Reference&#39;</span><span class="p">,</span> <span class="n">subtraction</span><span class="o">=</span><span class="s1">&#39;ADI&#39;</span><span class="p">)</span>
<span class="n">pancake</span><span class="o">.</span><span class="n">analysis</span><span class="o">.</span><span class="n">contrast_curve</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s1">&#39;Target&#39;</span><span class="p">,</span> <span class="n">references</span><span class="o">=</span><span class="s1">&#39;Reference&#39;</span><span class="p">,</span> <span class="n">subtraction</span><span class="o">=</span><span class="s1">&#39;RDI&#39;</span><span class="p">)</span>
<span class="n">pancake</span><span class="o">.</span><span class="n">analysis</span><span class="o">.</span><span class="n">contrast_curve</span><span class="p">(</span><span class="n">results</span><span class="p">,</span> <span class="n">target</span><span class="o">=</span><span class="s1">&#39;Target&#39;</span><span class="p">,</span> <span class="n">references</span><span class="o">=</span><span class="s1">&#39;Reference&#39;</span><span class="p">,</span> <span class="n">subtraction</span><span class="o">=</span><span class="s1">&#39;ADI+RDI&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This PSF subtraction process utilises <a class="reference external" href="https://pyklip.readthedocs.io/en/latest/">pyKLIP</a> to perform all the heavy lifting. Specificity in how the KLIP algorithm is implemented can also be provided, and is described in more detail in the Postprocessing tab. This process will also save the PSF subtracted images and contrast curves for further inspection.</p>
<img alt="_images/sub_images_website.png" src="_images/sub_images_website.png" />
<img alt="_images/contrast_curves_website.png" src="_images/contrast_curves_website.png" />
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="install.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="scene.html" class="btn btn-neutral float-right" title="Scene" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Aarynn Carter.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>