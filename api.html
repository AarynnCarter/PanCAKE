<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>PanCAKE package &mdash; PanCAKE 0.0.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Postprocessing" href="postprocessing.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> PanCAKE
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="index.html">Welcome to PanCAKE’s documentation!</a></li>
</ul>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic_tutorial.html">Basic Tutorial</a></li>
<li class="toctree-l1"><a class="reference internal" href="scene.html">Astrophysical Scene Constuction</a></li>
<li class="toctree-l1"><a class="reference internal" href="sequence.html">Observational Sequence Constuction</a></li>
<li class="toctree-l1"><a class="reference internal" href="simulation.html">Simulation Execution</a></li>
<li class="toctree-l1"><a class="reference internal" href="postprocessing.html">Postprocessing</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">API</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#module-pancake">Module contents</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-pancake.analysis">pancake.analysis module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-pancake.config">pancake.config module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#pancake-engine-module">pancake.engine module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-pancake.io">pancake.io module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-pancake.opds">pancake.opds module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-pancake.pandeia_subclasses">pancake.pandeia_subclasses module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-pancake.scene">pancake.scene module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-0">pancake.sequence module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-pancake.transformations">pancake.transformations module</a></li>
<li class="toctree-l2"><a class="reference internal" href="#module-pancake.utilities">pancake.utilities module</a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">PanCAKE</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
      <li>PanCAKE package</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/api.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="pancake-package">
<h1>PanCAKE package<a class="headerlink" href="#pancake-package" title="Permalink to this headline"></a></h1>
<section id="module-pancake">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-pancake" title="Permalink to this headline"></a></h2>
</section>
<section id="module-pancake.analysis">
<span id="pancake-analysis-module"></span><h2>pancake.analysis module<a class="headerlink" href="#module-pancake.analysis" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pancake.analysis.companion_snrs">
<span class="sig-prename descclassname"><span class="pre">pancake.analysis.</span></span><span class="sig-name descname"><span class="pre">companion_snrs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subtracted_hdu_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">companion_xy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask_radius</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">7</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/analysis.html#companion_snrs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.analysis.companion_snrs" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.analysis.compute_contrast">
<span class="sig-prename descclassname"><span class="pre">pancake.analysis.</span></span><span class="sig-name descname"><span class="pre">compute_contrast</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subtracted_hdu_file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offaxis_psf_stamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offaxis_flux</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raw_input_dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raw_input_psflib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">primary_vegamag</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pixel_scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.063</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annuli</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subsections</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numbasis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">movement</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subtraction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ADI'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">companion_xy</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./RESULTS/'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_klip_throughput</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/analysis.html#compute_contrast"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.analysis.compute_contrast" title="Permalink to this definition"></a></dt>
<dd><p>Function to compute contrast curves from a pyKLIP subtracted image file. Contrast curves will be corrected for both the coronagraphic and KLIP throughput,
in addition to being converted to relative, and absolute magnitude sensitivity limits.</p>
<dl class="simple">
<dt>Parameters</dt><dd><dl class="simple">
<dt>subtracted_hdu_file<span class="classifier">str</span></dt><dd><p>Filename for a subtracted image file as produced by pyklip.parallelized.klip_dataset()</p>
</dd>
<dt>filt<span class="classifier">str</span></dt><dd><p>JWST filter string</p>
</dd>
<dt>mask<span class="classifier">str</span></dt><dd><p>JWST coronagraphic mask string</p>
</dd>
<dt>offaxis_psf_stamp<span class="classifier">2D ndarray</span></dt><dd><p>Stamp image of an offaxis (i.e. not underneath the coronagraph) PSF</p>
</dd>
<dt>offaxis_flux<span class="classifier">float</span></dt><dd><p>Peak flux of the offaxis PSF</p>
</dd>
<dt>raw_input_dataset<span class="classifier">pyKLIP Dataset</span></dt><dd><p>The input target dataset that was used to generate the subtracted_hdu_file. Used many times over for planet injection.</p>
</dd>
<dt>raw_input_psflib<span class="classifier">pyKLIP PSFLibrary</span></dt><dd><p>The input PSF library dataset that was used to generate the subtracted_hdu_file, if any. Used many times over for planet injection.</p>
</dd>
<dt>primary_vegamag<span class="classifier">float</span></dt><dd><p>Vega magnitude of the primary source of the target scene in the specified filter.</p>
</dd>
<dt>pixel_scale<span class="classifier">float</span></dt><dd><p>Pixel scale for this observation.</p>
</dd>
<dt>annuli<span class="classifier">int</span></dt><dd><p>pyKLIP argument - Annuli to use for KLIP. Can be a number, or a list of 2-element tuples (a, b) specifying the pixel
boundaries (a &lt;= r &lt; b) for each annulus</p>
</dd>
<dt>subsections<span class="classifier">int</span></dt><dd><p>pyKLIP argument - Sections to break each annuli into. Can be a number [integer], or a list of 2-element tuples (a, b)
specifying the positon angle boundaries (a &lt;= PA &lt; b) for each section [radians]</p>
</dd>
<dt>numbasis<span class="classifier">int</span></dt><dd><p>number of KL basis vectors to use (can be a scalar or list like). Length of b If numbasis is [None] the number of KL modes to be
used is automatically picked based on the eigenvalues.</p>
</dd>
<dt>movement<span class="classifier">int</span></dt><dd><p>pyKLIP argument - minimum amount of movement (in pixels) of an astrophysical source to consider using that image for a refernece PSF</p>
</dd>
<dt>subtraction<span class="classifier">str</span></dt><dd><p>pyKLIP compatible subtraction string, available options are ‘ADI’, ‘RDI’, or ‘ADI+RDI’</p>
</dd>
<dt>companion_xy<span class="classifier">iterator of tuples</span></dt><dd><p>zip() tuples, with each containing any companion x and y <em>pixel</em> locations.</p>
</dd>
<dt>verbose<span class="classifier">bool</span></dt><dd><p>Optional argument to turn on (True) or off (False) printed terminal updates.</p>
</dd>
<dt>outputdir<span class="classifier">str</span></dt><dd><p>Directory to save any temporary or results files.</p>
</dd>
<dt>plot_klip_throughput<span class="classifier">bool</span></dt><dd><p>Optional argument to plot (True) the calculated KLIP throughput for each image. Primarily for debugging.</p>
</dd>
</dl>
</dd>
<dt>Returns</dt><dd><dl class="simple">
<dt>all_contrasts<span class="classifier">dict</span></dt><dd><p>Dictionary output of the contrast, relative magnitude sensitivity, absolute magnitude sensitivity and separation. Alternative
formats of the separation, the contrast prior to throughput corrections, and the estimated KLIP throughput, are also provided.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.analysis.contrast_curve">
<span class="sig-prename descclassname"><span class="pre">pancake.analysis.</span></span><span class="sig-name descname"><span class="pre">contrast_curve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pancake_results</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">references</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subtraction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ADI'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filters</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">masks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_rolls</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_primary_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reference_primary_sources</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reference_rolls</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">klip_annuli</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">klip_subsections</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">klip_numbasis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">klip_movement</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">get_companion_snrs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">clean_saved_files</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./RESULTS/'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_contrast</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_klip_throughput</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_contrasts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/analysis.html#contrast_curve"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.analysis.contrast_curve" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.analysis.enable_runtime_warnings">
<span class="sig-prename descclassname"><span class="pre">pancake.analysis.</span></span><span class="sig-name descname"><span class="pre">enable_runtime_warnings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">state</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/analysis.html#enable_runtime_warnings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.analysis.enable_runtime_warnings" title="Permalink to this definition"></a></dt>
<dd><p>Function to toggle on/off RuntimeWarning’s. Many of these do not impact the functionality of the code
and therefore can be safely ignored for the vast majority of user cases. As a result, this function is
immediately called a few lines above.</p>
<dl class="simple">
<dt>Parameters</dt><dd><dl class="simple">
<dt>state<span class="classifier">bool</span></dt><dd><p>Whether the RuntimeWarning’s should be enabled (True), or disabled ( False).</p>
</dd>
</dl>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">Returns</dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.analysis.extract_simulated_images">
<span class="sig-prename descclassname"><span class="pre">pancake.analysis.</span></span><span class="sig-name descname"><span class="pre">extract_simulated_images</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pancake_results</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">observations</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">primary_sources</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">all_rolls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">references</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extract_offaxis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename_prefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'image'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/analysis.html#extract_simulated_images"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.analysis.extract_simulated_images" title="Permalink to this definition"></a></dt>
<dd><p>Function to extract a subset of simulated images from the output of a PanCAKE simulation into a more flexible format.</p>
<dl class="simple">
<dt>Parameters</dt><dd><dl class="simple">
<dt>pancake_results<span class="classifier">HDUList</span></dt><dd><p>Simulated results as returned by pancake.sequence.Sequence().run()</p>
</dd>
<dt>observations<span class="classifier">list of strings</span></dt><dd><p>List of observation strings that correspond to extension names in the pancake_results HDUList</p>
</dd>
<dt>primary_sources<span class="classifier">list of strings</span></dt><dd><p>List of the primary source(s) as obtained by identify_primary_sources</p>
</dd>
<dt>all_rolls<span class="classifier">list of ints / floats</span></dt><dd><p>Which PA roll images to be extracted</p>
</dd>
<dt>references<span class="classifier">str / list of strings / NoneType</span></dt><dd><p>The provided string name(s) for the reference scene(s) in the observations sequence, if any. Can
not be used in conjunction with retrieving simulated target images.</p>
</dd>
<dt>extract_offaxis<span class="classifier">bool</span></dt><dd><p>Boolean choice of whether to extract offaxis images or not</p>
</dd>
<dt>filename_prefix<span class="classifier">str</span></dt><dd><p>Simple prefix string used to assign a unique name to each simulated image.</p>
</dd>
</dl>
</dd>
<dt>Returns</dt><dd><dl class="simple">
<dt>extracted<span class="classifier">dict</span></dt><dd><p>Dictionary containing all requested images, their roll angles, center points, assigned filenames, and
if requested, a 20x20 pixel offaxis PSF stamp image and its peak flux.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.analysis.get_companion_mask">
<span class="sig-prename descclassname"><span class="pre">pancake.analysis.</span></span><span class="sig-name descname"><span class="pre">get_companion_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">companion_xy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask_dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask_psflib</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offaxis_psf_stamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[0,</span> <span class="pre">0]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'f444w'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mask335r'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">annuli</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subsections</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">numbasis</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">movement</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subtraction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ADI'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputdir</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'./RESULTS/'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/analysis.html#get_companion_mask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.analysis.get_companion_mask" title="Permalink to this definition"></a></dt>
<dd><p>Function to create a mask that can be applied to an image in order to “block” any pixels that correspond to the emitted flux of a companion object.
In essence, the function uses an offaxis PSF to inject companions into the image, on top of where they already exist, except at a <em>very</em> high flux.
This image can then be processed via KLIP to identify the pixels in the resultant subtracted image which are most impacted by the presence of
the companion object, and assign them to be masked. This offers significant improvements over a simplistic circular mask due to the lobes of the
JWST PSF, particularly for the NIRCam filters. Main current drawback is it only masks excess flux from companions, and misses ADI oversubtractions.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.analysis.get_source_properties">
<span class="sig-prename descclassname"><span class="pre">pancake.analysis.</span></span><span class="sig-name descname"><span class="pre">get_source_properties</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">template_obs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">primary_source</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/analysis.html#get_source_properties"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.analysis.get_source_properties" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.analysis.identify_primary_sources">
<span class="sig-prename descclassname"><span class="pre">pancake.analysis.</span></span><span class="sig-name descname"><span class="pre">identify_primary_sources</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pancake_results</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">references</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_primary_source</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reference_primary_sources</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/analysis.html#identify_primary_sources"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.analysis.identify_primary_sources" title="Permalink to this definition"></a></dt>
<dd><p>Function to identify, or assume, the primary sources (i.e. central ‘stars’) of output PanCAKE simulation results.</p>
<dl class="simple">
<dt>Parameters</dt><dd><dl class="simple">
<dt>pancake_results<span class="classifier">HDUList</span></dt><dd><p>Simulated results as returned by pancake.sequence.Sequence().run()</p>
</dd>
<dt>target<span class="classifier">str</span></dt><dd><p>The provided string name for the target scene in the observation sequence.</p>
</dd>
<dt>references<span class="classifier">str / list of strings / NoneType</span></dt><dd><p>The provided string name(s) for the reference scene(s) in the observations sequence, if any.</p>
</dd>
<dt>target_primary_source<span class="classifier">str</span></dt><dd><p>Desired primary source to use for the target scene, or ‘default’ to assume primary source.</p>
</dd>
<dt>reference_primary_sources<span class="classifier">str / list of strings</span></dt><dd><p>Desired primary source(s) to use for the reference scene(s), or ‘default’ to assume primary source(s).</p>
</dd>
</dl>
</dd>
<dt>Returns</dt><dd><dl class="simple">
<dt>primary_sources<span class="classifier">list of strings</span></dt><dd><p>List of the primary source(s), where the source in the ‘0’ index always corresponds to the target scene.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.analysis.mask_companions">
<span class="sig-prename descclassname"><span class="pre">pancake.analysis.</span></span><span class="sig-name descname"><span class="pre">mask_companions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image_array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">companion_xy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask_radius</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">7</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/analysis.html#mask_companions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.analysis.mask_companions" title="Permalink to this definition"></a></dt>
<dd><p>Function apply NaN masks to a number of images at the location of known companion objects.</p>
<dl class="simple">
<dt>Parameters</dt><dd><dl class="simple">
<dt>image_array<span class="classifier">3D ndarray</span></dt><dd><p>Numpy array of input images</p>
</dd>
<dt>companion_xy<span class="classifier">iterator of tuples</span></dt><dd><p>zip() tuples, with each containing the companion x and y <em>pixel</em> locations.</p>
</dd>
<dt>mask_radius<span class="classifier">float</span></dt><dd><p>The desired mask radius in pixels.</p>
</dd>
</dl>
</dd>
<dt>Returns</dt><dd><dl class="simple">
<dt>masked_images<span class="classifier">3D ndarray</span></dt><dd><p>Numpy array of output, companion masked images.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.analysis.meas_contrast_basic">
<span class="sig-prename descclassname"><span class="pre">pancake.analysis.</span></span><span class="sig-name descname"><span class="pre">meas_contrast_basic</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dat</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iwa</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">owa</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolution</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">low_pass_filter</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/analysis.html#meas_contrast_basic"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.analysis.meas_contrast_basic" title="Permalink to this definition"></a></dt>
<dd><p>Duplicate of the meas_contrast funciton within pyKLIP, except calculating a
standard 5 sigma limit instead of small sample statistics corrections.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.analysis.process_simulations">
<span class="sig-prename descclassname"><span class="pre">pancake.analysis.</span></span><span class="sig-name descname"><span class="pre">process_simulations</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pancake_results</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_obs</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">primary_sources</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">references</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reference_obs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_rolls</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reference_rolls</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">subtraction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'ADI'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/analysis.html#process_simulations"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.analysis.process_simulations" title="Permalink to this definition"></a></dt>
<dd><p>Function to process a set of desired simulated images from PanCAKE and convert them into pyKLIP datasets to enable easier stellar PSF subtraction
and contrast curve estimation.</p>
<dl class="simple">
<dt>Parameters</dt><dd><dl class="simple">
<dt>pancake_results<span class="classifier">HDUList</span></dt><dd><p>Simulated results as returned by pancake.sequence.Sequence().run()</p>
</dd>
<dt>target<span class="classifier">string</span></dt><dd><p>The provided string name for the target scene in the observation sequence</p>
</dd>
<dt>target_obs<span class="classifier">list of stings</span></dt><dd><p>List of target observation strings that correspond to extension names in the pancake_results HDUList</p>
</dd>
<dt>filt<span class="classifier">string</span></dt><dd><p>JWST filter string</p>
</dd>
<dt>mask<span class="classifier">string</span></dt><dd><p>JWST coronagraphic mask string</p>
</dd>
<dt>primary_sources<span class="classifier">list of strings</span></dt><dd><p>List of the primary source(s) as obtained by identify_primary_sources</p>
</dd>
<dt>references<span class="classifier">list of strings</span></dt><dd><p>The provided string name(s) for the reference scene(s) in the observations sequence, if any.</p>
</dd>
<dt>reference_obs<span class="classifier">list of strings</span></dt><dd><p>List of target observation strings that correspond to extension names in the pancake_results HDUList, if any.</p>
</dd>
<dt>target_rolls<span class="classifier">list of ints / floats</span></dt><dd><p>Which target PA roll images to use. Alternatively, ‘default’ to use all of them for ADI modes, or roll=0 for RDI.</p>
</dd>
<dt>reference_rolls<span class="classifier">list of ints / floats</span></dt><dd><p>Which reference PA roll images to use. Alternatively, ‘default’ to use all of them for ADI modes, or roll=0 for RDI.</p>
</dd>
<dt>subtraction<span class="classifier">str</span></dt><dd><p>pyKLIP compatible subtraction string, available options are ‘ADI’, ‘RDI’, or ‘ADI+RDI’</p>
</dd>
</dl>
</dd>
<dt>Returns</dt><dd><dl class="simple">
<dt>processed_output<span class="classifier">dict</span></dt><dd><p>Dictionary output containing pyKLIP datasets for the target and PSF library (if necessary), in addition
to some information on the offaxis simulation for normalisation / planet injection purposes.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.analysis.transmission_corrected">
<span class="sig-prename descclassname"><span class="pre">pancake.analysis.</span></span><span class="sig-name descname"><span class="pre">transmission_corrected</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_stamp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_dx</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_dy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'multiply'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/analysis.html#transmission_corrected"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.analysis.transmission_corrected" title="Permalink to this definition"></a></dt>
<dd><p>Function to apply a 2-dimensional JWST coronagraphic transmission map to an input image.</p>
<dl class="simple">
<dt>Parameters</dt><dd><dl class="simple">
<dt>input_stamp<span class="classifier">2D ndarray</span></dt><dd><p>Input image, should have dimensions equal to or smaller than the array for the
coronagraphic transmission map.</p>
</dd>
<dt>input_dx<span class="classifier">2D ndarray</span></dt><dd><p>Array of X pixel offsets for each element in the array relative to the central pixel of the simulation.</p>
</dd>
<dt>input_dy<span class="classifier">2D ndarray</span></dt><dd><p>Array of Y pixel offsets for each element in the array relative to the central pixel of the simulation.</p>
</dd>
<dt>filt<span class="classifier">str</span></dt><dd><p>JWST filter string, used to obtain offsets for the NIRCam bar masks.</p>
</dd>
<dt>mask<span class="classifier">str</span></dt><dd><p>JWST coronagraphic mask string, used to identify which transmission map to apply.</p>
</dd>
<dt>mode<span class="classifier">str</span></dt><dd><p>Whether to ‘multiply’ or ‘divide’ the input stamp by the transmission map.</p>
</dd>
</dl>
</dd>
<dt>Returns</dt><dd><dl class="simple">
<dt>output_stamp<span class="classifier">2D ndarray</span></dt><dd><p>Equivalent to the input_stamp following the application of the transmission map.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-pancake.config">
<span id="pancake-config-module"></span><h2>pancake.config module<a class="headerlink" href="#module-pancake.config" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pancake.config.EngineConfiguration">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">pancake.config.</span></span><span class="sig-name descname"><span class="pre">EngineConfiguration</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/config.html#EngineConfiguration"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.config.EngineConfiguration" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A class to consolidate the options for customizing
calculations made with the Pandiea engine.</p>
<p>Users aren’t expected to interact with this class
directly. Use the engine.options object instead.</p>
<p>Could add type checking in the &#64;property.setter
methods.</p>
<dl class="py property">
<dt class="sig sig-object py" id="pancake.config.EngineConfiguration.cache">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">cache</span></span><a class="headerlink" href="#pancake.config.EngineConfiguration.cache" title="Permalink to this definition"></a></dt>
<dd><p>Caching can currently be done one of three ways:
- LRU RAM cache (‘ram’)
- On-disk cache (‘disk’)
- No caching (‘none’)</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pancake.config.EngineConfiguration.current_config">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">current_config</span></span><a class="headerlink" href="#pancake.config.EngineConfiguration.current_config" title="Permalink to this definition"></a></dt>
<dd><p>A space to store a pandeia configuration dictionary for inspection at runtime.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pancake.config.EngineConfiguration.current_options">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">current_options</span></span><a class="headerlink" href="#pancake.config.EngineConfiguration.current_options" title="Permalink to this definition"></a></dt>
<dd><p>Stores all configuration options in a dictionary, and returns that dictionary.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pancake.config.EngineConfiguration.effects">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">effects</span></span><a class="headerlink" href="#pancake.config.EngineConfiguration.effects" title="Permalink to this definition"></a></dt>
<dd><p>Sets pandeia effects (background, saturation, IPC). The default is for everything to be turned on.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pancake.config.EngineConfiguration.noise">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">noise</span></span><a class="headerlink" href="#pancake.config.EngineConfiguration.noise" title="Permalink to this definition"></a></dt>
<dd><p>Sets noise parameters. The default is for everything to be turned on.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pancake.config.EngineConfiguration.on_the_fly_PSFs">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">on_the_fly_PSFs</span></span><a class="headerlink" href="#pancake.config.EngineConfiguration.on_the_fly_PSFs" title="Permalink to this definition"></a></dt>
<dd><p>Avoid Pandeia’s precomputed PSFs and recompute in WebbPSF as needed?</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pancake.config.EngineConfiguration.on_the_fly_oversample">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">on_the_fly_oversample</span></span><a class="headerlink" href="#pancake.config.EngineConfiguration.on_the_fly_oversample" title="Permalink to this definition"></a></dt>
<dd><p>A dictionary of extra options for configuring the PSF
calculation ad hoc. Note some options are overridden
in get_psf_on_the_fly().</p>
<p>See WebbPSF documentation for more details.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pancake.config.EngineConfiguration.on_the_fly_webbpsf_opd">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">on_the_fly_webbpsf_opd</span></span><a class="headerlink" href="#pancake.config.EngineConfiguration.on_the_fly_webbpsf_opd" title="Permalink to this definition"></a></dt>
<dd><p>Allow overriding the default OPD selection when
computing PSFs on the fly.</p>
<p>See the WebbPSF documentation.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pancake.config.EngineConfiguration.on_the_fly_webbpsf_options">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">on_the_fly_webbpsf_options</span></span><a class="headerlink" href="#pancake.config.EngineConfiguration.on_the_fly_webbpsf_options" title="Permalink to this definition"></a></dt>
<dd><p>A dictionary of extra options for configuring the PSF
calculation ad hoc. Note some options are overridden
in get_psf_on_the_fly().</p>
<p>See WebbPSF documentation for more details.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pancake.config.EngineConfiguration.pandeia_effects">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">pandeia_effects</span></span><a class="headerlink" href="#pancake.config.EngineConfiguration.pandeia_effects" title="Permalink to this definition"></a></dt>
<dd><p>Allows access to the pandeia noise configuration</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pancake.config.EngineConfiguration.pandeia_fixed_seed">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">pandeia_fixed_seed</span></span><a class="headerlink" href="#pancake.config.EngineConfiguration.pandeia_fixed_seed" title="Permalink to this definition"></a></dt>
<dd><p>By default, the pandeia engine uses a fixed seed.
This has undesirable results for many coronagraphy
applications. Pandeia-Coronagraphy disables this
by default. Restore the fixed seed by toggling
this to True.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.config.EngineConfiguration.pandeia_instrument_config">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">pandeia_instrument_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">aperture</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/config.html#EngineConfiguration.pandeia_instrument_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.config.EngineConfiguration.pandeia_instrument_config" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pancake.config.EngineConfiguration.pandeia_noise">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">pandeia_noise</span></span><a class="headerlink" href="#pancake.config.EngineConfiguration.pandeia_noise" title="Permalink to this definition"></a></dt>
<dd><p>Allows access to the pandeia noise configuration</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.config.EngineConfiguration.restore_defaults">
<span class="sig-name descname"><span class="pre">restore_defaults</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/config.html#EngineConfiguration.restore_defaults"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.config.EngineConfiguration.restore_defaults" title="Permalink to this definition"></a></dt>
<dd><p>Restore all parameters to their default values.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.config.EngineConfiguration.restore_options">
<span class="sig-name descname"><span class="pre">restore_options</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/config.html#EngineConfiguration.restore_options"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.config.EngineConfiguration.restore_options" title="Permalink to this definition"></a></dt>
<dd><p>This restores whatever is stored in self._saved_options. If there’s nothing there, it will
have no effect (rather than crashing your program, so there’s that at least). Note that it
does <em>not</em> delete the configuration stored in self._saved_options.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.config.EngineConfiguration.save_options">
<span class="sig-name descname"><span class="pre">save_options</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/config.html#EngineConfiguration.save_options"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.config.EngineConfiguration.save_options" title="Permalink to this definition"></a></dt>
<dd><p>The configuration object has room for a single backed-up option set. This is useful for
storing a default set before running a calculation, so that you can fiddle with the
parameters, run the calculation, and then restore everything to what it was before you
started fiddling. Note that there is <em>only</em> one such built-in save, so if you want to save
a set of parameters you’ve created without overwriting that save, you should call the
current_options parameter and store the resulting dictionary somewhere.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.config.EngineConfiguration.set_background">
<span class="sig-name descname"><span class="pre">set_background</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/config.html#EngineConfiguration.set_background"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.config.EngineConfiguration.set_background" title="Permalink to this definition"></a></dt>
<dd><p>Allows for background counts to be turned on or off in the simulation</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.config.EngineConfiguration.set_crs">
<span class="sig-name descname"><span class="pre">set_crs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/config.html#EngineConfiguration.set_crs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.config.EngineConfiguration.set_crs" title="Permalink to this definition"></a></dt>
<dd><p>Allows for cosmic rays to be turned on or off in the simulation</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.config.EngineConfiguration.set_darkcurrent">
<span class="sig-name descname"><span class="pre">set_darkcurrent</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/config.html#EngineConfiguration.set_darkcurrent"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.config.EngineConfiguration.set_darkcurrent" title="Permalink to this definition"></a></dt>
<dd><p>Allows for dark current to be turned on or off in the simulation</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.config.EngineConfiguration.set_ffnoise">
<span class="sig-name descname"><span class="pre">set_ffnoise</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/config.html#EngineConfiguration.set_ffnoise"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.config.EngineConfiguration.set_ffnoise" title="Permalink to this definition"></a></dt>
<dd><p>Allows for flatfield noise to be turned on or off in the simulation</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.config.EngineConfiguration.set_ipc">
<span class="sig-name descname"><span class="pre">set_ipc</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/config.html#EngineConfiguration.set_ipc"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.config.EngineConfiguration.set_ipc" title="Permalink to this definition"></a></dt>
<dd><p>Allows for inter-pixel capacitance to be turned on or off in the simulation</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.config.EngineConfiguration.set_readnoise">
<span class="sig-name descname"><span class="pre">set_readnoise</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/config.html#EngineConfiguration.set_readnoise"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.config.EngineConfiguration.set_readnoise" title="Permalink to this definition"></a></dt>
<dd><p>Allows for readnoise to be turned on or off in the simulation</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.config.EngineConfiguration.set_rn_correlation">
<span class="sig-name descname"><span class="pre">set_rn_correlation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/config.html#EngineConfiguration.set_rn_correlation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.config.EngineConfiguration.set_rn_correlation" title="Permalink to this definition"></a></dt>
<dd><p>Allows for readnoise correlation to be turned on or off in the simulation</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.config.EngineConfiguration.set_saturation">
<span class="sig-name descname"><span class="pre">set_saturation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/config.html#EngineConfiguration.set_saturation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.config.EngineConfiguration.set_saturation" title="Permalink to this definition"></a></dt>
<dd><p>Allows for detector saturation to be turned on or off in the simulation</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pancake.config.EngineConfiguration.verbose">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">verbose</span></span><a class="headerlink" href="#pancake.config.EngineConfiguration.verbose" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="pancake.config.EngineConfiguration.wave_sampling">
<em class="property"><span class="pre">property</span> </em><span class="sig-name descname"><span class="pre">wave_sampling</span></span><a class="headerlink" href="#pancake.config.EngineConfiguration.wave_sampling" title="Permalink to this definition"></a></dt>
<dd><p>Pandeia defaults to ~200 wavelength samples for imaging
This is slow and unlikely to significantly improve the
accuracy of coronagraphic performance predictions.
Setting wave_sampling to 10-20 should be sufficient,
and translates to a time savings of about 10.
Leaving it at None sets it to Pandeia’s default.</p>
</dd></dl>

</dd></dl>

</section>
<section id="pancake-engine-module">
<h2>pancake.engine module<a class="headerlink" href="#pancake-engine-module" title="Permalink to this headline"></a></h2>
<span class="target" id="module-pancake.engine"></span><dl class="py function">
<dt class="sig sig-object py" id="pancake.engine.calculate_all">
<span class="sig-prename descclassname"><span class="pre">pancake.engine.</span></span><span class="sig-name descname"><span class="pre">calculate_all</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw_config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/engine.html#calculate_all"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.engine.calculate_all" title="Permalink to this definition"></a></dt>
<dd><dl class="simple">
<dt>Run a pandeia coronagraphy calculation. Output will be:</dt><dd><ul class="simple">
<li><p>a pandeia report showing the target</p></li>
<li><p>a pandeia report showing the reference source</p></li>
<li><p>a pandeia report showing the unocculted target (with saturation disabled)</p></li>
</ul>
</dd>
</dl>
<p>In pandeia 1.3, this can be done as a single calculation, with the results obtained from
sub-reports. In pandeia 1.2, the sub-reports are not actually returned properly, so the overall
calculation needs to be run 3 times.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.engine.calculate_batch">
<span class="sig-prename descclassname"><span class="pre">pancake.engine.</span></span><span class="sig-name descname"><span class="pre">calculate_batch</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">calcfiles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nprocesses</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/engine.html#calculate_batch"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.engine.calculate_batch" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.engine.calculate_contrast">
<span class="sig-prename descclassname"><span class="pre">pancake.engine.</span></span><span class="sig-name descname"><span class="pre">calculate_contrast</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw_config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset_x</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset_y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.5</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/engine.html#calculate_contrast"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.engine.calculate_contrast" title="Permalink to this definition"></a></dt>
<dd><p>Run a pandeia coronagraphy calculation in target-only mode, with the target offset to be
unocculted, and with saturation disabled.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.engine.calculate_contrast_curve">
<span class="sig-prename descclassname"><span class="pre">pancake.engine.</span></span><span class="sig-name descname"><span class="pre">calculate_contrast_curve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw_config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reference</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ta_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">iterations</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keep_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/engine.html#calculate_contrast_curve"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.engine.calculate_contrast_curve" title="Permalink to this definition"></a></dt>
<dd><p>This is a replacement for the Pandeia calculate_contrast function. It is designed to use the
various internal analysis functions to do the following:</p>
<blockquote>
<div><ul class="simple">
<li><p>Load one of the pandeia_coronagraphy custom templates</p></li>
<li><dl class="simple">
<dt>Repeat &lt;iterations&gt; times:</dt><dd><ul>
<li><p>Run through pandeia with the target scene in place of the default scene</p></li>
<li><p>Run through pandeia with the reference scene in place of the default scene</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>Run through pandeia with the off-axis target</p></li>
<li><p>Generate an aperture image</p></li>
<li><p>Run the analysis contrast utility method</p></li>
</ul>
</div></blockquote>
<dl class="simple">
<dt>It will return:</dt><dd><ul class="simple">
<li><p>list of target images</p></li>
<li><p>list of reference images</p></li>
<li><p>off-axis image</p></li>
<li><p>list of subtracted images</p></li>
<li><p>normalized contrast profile (with reference bins)</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>raw_config: string or dict</dt><dd><dl class="simple">
<dt>One of:</dt><dd><ul class="simple">
<li><p>file name of pandeia JSON file describing an observation</p></li>
<li><p>pandeia configuration dictionary</p></li>
<li><p>pandeia instrument configuration from configuration dictionary
(i.e. config[‘configuration’][‘instrument’])</p></li>
</ul>
</dd>
</dl>
</dd>
<dt>target: list of dict (or dict), default None</dt><dd><dl class="simple">
<dt>List of Pandeia-style scene dictionaries describing the target. If not present, then the</dt><dd><p>target scene from raw_config will be used.</p>
</dd>
</dl>
</dd>
<dt>reference: list of dict (or dict), default None</dt><dd><dl class="simple">
<dt>List of Pandeia-style scene dictionaries describing the reference source. If not present,</dt><dd><p>then the reference scene from raw_config will be used. If a list, only the first
element will be used (i.e. the reference source will be assumed to be a single element)</p>
</dd>
</dl>
</dd>
<dt>ta_error: bool, default False</dt><dd><p>Whether to add target acquisition error offsets to the target and reference scenes.</p>
</dd>
<dt>iterations: int, default=1</dt><dd><p>Number of times to iterate generating TA errors and observing the target and reference
source</p>
</dd>
</dl>
<p>targets: list of numpy arrays containing &lt;iterations&gt; detector slopes of the target
references: list of numpy arrays containing &lt;iterations&gt; detector slopes of the reference
unocculted: numpy array of the detector slopes of the unocculted source
subtractions: list of numpy arrays containing &lt;iterations&gt; reference-subtracted target images
contrast: list of numpy arrays containing:</p>
<blockquote>
<div><p>bins: bins used for the normalized contrast profile
contrast: normalized contrast profile</p>
</div></blockquote>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.engine.calculate_reference">
<span class="sig-prename descclassname"><span class="pre">pancake.engine.</span></span><span class="sig-name descname"><span class="pre">calculate_reference</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw_config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/engine.html#calculate_reference"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.engine.calculate_reference" title="Permalink to this definition"></a></dt>
<dd><p>Run a pandeia coronagraphy calculation in target-only mode, replacing the target scene with
the scene stored in the coronagraphy strategy PSF subtraction source.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.engine.calculate_subtracted">
<span class="sig-prename descclassname"><span class="pre">pancake.engine.</span></span><span class="sig-name descname"><span class="pre">calculate_subtracted</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw_config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reference</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ta_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sgd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stepsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.02</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/engine.html#calculate_subtracted"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.engine.calculate_subtracted" title="Permalink to this definition"></a></dt>
<dd><p>This is a function to calculate subtracted images with an optional reference image
small-grid dither (SGD). It does the following:</p>
<blockquote>
<div><ul class="simple">
<li><p>Create a pandeia configuration file from which to build the target and reference scenes</p></li>
<li><p>[optional] construct SGD</p></li>
<li><p>observe target scene</p></li>
<li><dl class="simple">
<dt>for each reference observation:</dt><dd><ul>
<li><p>observe reference scene</p></li>
</ul>
</dd>
</dl>
</li>
<li><p>centre reference to targets</p></li>
<li><p>create klip PSF</p></li>
<li><p>subtract klip PSF from target image</p></li>
<li><p>return subtracted image</p></li>
</ul>
</div></blockquote>
<dl class="simple">
<dt>It will return:</dt><dd><ul class="simple">
<li><p>target image</p></li>
<li><p>list of reference images</p></li>
<li><p>artificial PSF</p></li>
<li><p>subtracted image</p></li>
</ul>
</dd>
</dl>
<dl class="simple">
<dt>raw_config: string or dict</dt><dd><dl class="simple">
<dt>One of:</dt><dd><ul class="simple">
<li><p>file name of pandeia JSON file describing an observation</p></li>
<li><p>pandeia configuration dictionary</p></li>
<li><p>pandeia instrument configuration from configuration dictionary
(i.e. config[‘configuration’][‘instrument’])</p></li>
</ul>
</dd>
</dl>
</dd>
<dt>target_scene: list of dict (or dict), default None</dt><dd><dl class="simple">
<dt>List of Pandeia-style scene dictionaries describing the target. If not present, then the</dt><dd><p>target scene from raw_config will be used.</p>
</dd>
</dl>
</dd>
<dt>reference_scene: list of dict (or dict), default None</dt><dd><dl class="simple">
<dt>List of Pandeia-style scene dictionaries describing the reference source. If not present,</dt><dd><p>then the reference scene from raw_config will be used. If a list, only the first
element will be used (i.e. the reference source will be assumed to be a single element)</p>
</dd>
</dl>
</dd>
<dt>ta_error: bool, default False</dt><dd><p>Whether to add target acquisition error offsets to the target and reference scenes.</p>
</dd>
<dt>sgd: bool, default False</dt><dd><p>Whether to create a small-grid dither (SGD) for the reference scene.</p>
</dd>
<dt>stepsize: float, default 0.02</dt><dd><p>Size of the offsets in the SGD (if present), in arcseconds.</p>
</dd>
</dl>
<p>target: numpy array containing &lt;iterations&gt; detector slopes of the target
references: list of numpy arrays containing &lt;iterations&gt; detector slopes of the reference
psf: artificial PSF created with klip
subtracted: numpy array containing &lt;iterations&gt; reference-subtracted target images</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.engine.calculate_target">
<span class="sig-prename descclassname"><span class="pre">pancake.engine.</span></span><span class="sig-name descname"><span class="pre">calculate_target</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw_config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/engine.html#calculate_target"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.engine.calculate_target" title="Permalink to this definition"></a></dt>
<dd><p>Run a pandeia coronagraphy calculation in target-only mode</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.engine.get_options">
<span class="sig-prename descclassname"><span class="pre">pancake.engine.</span></span><span class="sig-name descname"><span class="pre">get_options</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/engine.html#get_options"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.engine.get_options" title="Permalink to this definition"></a></dt>
<dd><p>This returns the options object, and is used to let the various Pandeia-based subclasses get
the options object currently in use.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.engine.get_template">
<span class="sig-prename descclassname"><span class="pre">pancake.engine.</span></span><span class="sig-name descname"><span class="pre">get_template</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/engine.html#get_template"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.engine.get_template" title="Permalink to this definition"></a></dt>
<dd><p>Look up a template filename.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.engine.list_templates">
<span class="sig-prename descclassname"><span class="pre">pancake.engine.</span></span><span class="sig-name descname"><span class="pre">list_templates</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/engine.html#list_templates"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.engine.list_templates" title="Permalink to this definition"></a></dt>
<dd><p>List all bundled template calculation files.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.engine.load_calculation">
<span class="sig-prename descclassname"><span class="pre">pancake.engine.</span></span><span class="sig-name descname"><span class="pre">load_calculation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/engine.html#load_calculation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.engine.load_calculation" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.engine.perform_calculation">
<span class="sig-prename descclassname"><span class="pre">pancake.engine.</span></span><span class="sig-name descname"><span class="pre">perform_calculation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">calcfile</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/engine.html#perform_calculation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.engine.perform_calculation" title="Permalink to this definition"></a></dt>
<dd><p>Manually decorate pandeia.engine.perform_calculation to circumvent
pandeia’s tendency to modify the calcfile during the calculation.</p>
<p>Updates to the saturation computation could go here as well.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.engine.process_config">
<span class="sig-prename descclassname"><span class="pre">pancake.engine.</span></span><span class="sig-name descname"><span class="pre">process_config</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw_config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target_scene</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reference_scene</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/engine.html#process_config"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.engine.process_config" title="Permalink to this definition"></a></dt>
<dd><p>Process a variable that might be a file name, full JWST configuration dictionary, or instrument
configuration dictionary, along with optional target and reference scenes.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.engine.random_seed">
<span class="sig-prename descclassname"><span class="pre">pancake.engine.</span></span><span class="sig-name descname"><span class="pre">random_seed</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">self</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/engine.html#random_seed"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.engine.random_seed" title="Permalink to this definition"></a></dt>
<dd><p>The pandeia engine sets a fixed seed of 42.
Circumvent that here.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.engine.save_calculation">
<span class="sig-prename descclassname"><span class="pre">pancake.engine.</span></span><span class="sig-name descname"><span class="pre">save_calculation</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">calcfile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/engine.html#save_calculation"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.engine.save_calculation" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.engine.save_to_fits">
<span class="sig-prename descclassname"><span class="pre">pancake.engine.</span></span><span class="sig-name descname"><span class="pre">save_to_fits</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">array</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/engine.html#save_to_fits"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.engine.save_to_fits" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="module-pancake.io">
<span id="pancake-io-module"></span><h2>pancake.io module<a class="headerlink" href="#module-pancake.io" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pancake.io.determine_aperture">
<span class="sig-prename descclassname"><span class="pre">pancake.io.</span></span><span class="sig-name descname"><span class="pre">determine_aperture</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nircam_aperture</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/io.html#determine_aperture"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.io.determine_aperture" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.io.determine_bar_offset">
<span class="sig-prename descclassname"><span class="pre">pancake.io.</span></span><span class="sig-name descname"><span class="pre">determine_bar_offset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filt</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/io.html#determine_bar_offset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.io.determine_bar_offset" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.io.determine_exposure_time">
<span class="sig-prename descclassname"><span class="pre">pancake.io.</span></span><span class="sig-name descname"><span class="pre">determine_exposure_time</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">subarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pattern</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">groups</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">integrations</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/io.html#determine_exposure_time"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.io.determine_exposure_time" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.io.determine_instrument">
<span class="sig-prename descclassname"><span class="pre">pancake.io.</span></span><span class="sig-name descname"><span class="pre">determine_instrument</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filt</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/io.html#determine_instrument"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.io.determine_instrument" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.io.determine_pixel_scale">
<span class="sig-prename descclassname"><span class="pre">pancake.io.</span></span><span class="sig-name descname"><span class="pre">determine_pixel_scale</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instrument</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filt</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/io.html#determine_pixel_scale"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.io.determine_pixel_scale" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.io.determine_subarray">
<span class="sig-prename descclassname"><span class="pre">pancake.io.</span></span><span class="sig-name descname"><span class="pre">determine_subarray</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nircam_subarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">miri_subarray</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/io.html#determine_subarray"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.io.determine_subarray" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.io.read_bandpass">
<span class="sig-prename descclassname"><span class="pre">pancake.io.</span></span><span class="sig-name descname"><span class="pre">read_bandpass</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">bandpass</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/io.html#read_bandpass"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.io.read_bandpass" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.io.read_coronagraph_transmission">
<span class="sig-prename descclassname"><span class="pre">pancake.io.</span></span><span class="sig-name descname"><span class="pre">read_coronagraph_transmission</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mask</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/io.html#read_coronagraph_transmission"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.io.read_coronagraph_transmission" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.io.sequence_input_checks">
<span class="sig-prename descclassname"><span class="pre">pancake.io.</span></span><span class="sig-name descname"><span class="pre">sequence_input_checks</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">exposures</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nircam_aperture</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nircam_subarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">miri_subarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">telescope</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rolls</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">nircam_sgd</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">miri_sgd</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/io.html#sequence_input_checks"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.io.sequence_input_checks" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</section>
<section id="module-pancake.opds">
<span id="pancake-opds-module"></span><h2>pancake.opds module<a class="headerlink" href="#module-pancake.opds" title="Permalink to this headline"></a></h2>
<p>ALL CODE BELOW IS FROM JARRON LEISENRING
<a class="reference external" href="https://github.com/JarronL/pynrc/blob/develop/pynrc/opds.py">https://github.com/JarronL/pynrc/blob/develop/pynrc/opds.py</a></p>
<dl class="py function">
<dt class="sig sig-object py" id="pancake.opds.OPDFile_to_HDUList">
<span class="sig-prename descclassname"><span class="pre">pancake.opds.</span></span><span class="sig-name descname"><span class="pre">OPDFile_to_HDUList</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slice_to_use</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/opds.html#OPDFile_to_HDUList"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.opds.OPDFile_to_HDUList" title="Permalink to this definition"></a></dt>
<dd><p>Make a picklable HDUList for ingesting into multiproccessor WebbPSF
helper function.</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pancake.opds.OTE_WFE_Drift_Model">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">pancake.opds.</span></span><span class="sig-name descname"><span class="pre">OTE_WFE_Drift_Model</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/opds.html#OTE_WFE_Drift_Model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.opds.OTE_WFE_Drift_Model" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">webbpsf.opds.OTE_Linear_Model_WSS</span></code></p>
<p>OPD subclass for calculating OPD drift values over time.</p>
<dl class="py method">
<dt class="sig sig-object py" id="pancake.opds.OTE_WFE_Drift_Model.calc_rms">
<span class="sig-name descname"><span class="pre">calc_rms</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">arr</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">segname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/opds.html#OTE_WFE_Drift_Model.calc_rms"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.opds.OTE_WFE_Drift_Model.calc_rms" title="Permalink to this definition"></a></dt>
<dd><p>Calculate RMS of input images</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.opds.OTE_WFE_Drift_Model.evolve_dopd">
<span class="sig-name descname"><span class="pre">evolve_dopd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">delta_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slew_angles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">case</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'BOL'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_wfe_amps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_dopd_fin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">do_thermal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">do_frill</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">do_iec</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/opds.html#OTE_WFE_Drift_Model.evolve_dopd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.opds.OTE_WFE_Drift_Model.evolve_dopd" title="Permalink to this definition"></a></dt>
<dd><p>Evolve the delta OPD with multiple slews</p>
<p>Input an array of <cite>delta_time</cite> and <cite>slew_angles</cite> to return the
evolution of a delta_OPD image. Option to return the various
WFE components, including OTE backplane (thermal), frill tensioning,
and IEC heater switching.</p>
<dl class="simple">
<dt>delta_time<span class="classifier">astropy.units quantity object</span></dt><dd><p>An array of times assuming astropy units.</p>
</dd>
<dt>slew_angles<span class="classifier">ndarray</span></dt><dd><p>The sun pitch angles, in degrees between -5 and +45.</p>
</dd>
<dt>case<span class="classifier">string</span></dt><dd><p>Either “BOL” for current best estimate at beginning of life, or
“EOL” for more conservative prediction at end of life.</p>
</dd>
<dt>do_thermal<span class="classifier">bool</span></dt><dd><p>Include thermal slew component? Mostly for debugging purposes.</p>
</dd>
<dt>do_frill<span class="classifier">bool</span></dt><dd><p>Include frill component? Mostly for debugging purposes.</p>
</dd>
<dt>do_iec<span class="classifier">bool</span></dt><dd><p>Include IEC component? Good to exclude if calling this function
repeatedly for evolution of multiple slews, then add IEC later.</p>
</dd>
<dt>return_wfe_amps<span class="classifier">bool</span></dt><dd><p>Return a dictionary that provides the RMS WFE (nm) of each
component at each time step.</p>
</dd>
<dt>return_dopd_fin<span class="classifier">bool</span></dt><dd><p>Option to exclude calculating final delta OPD in case we only
want the final RMS WFE dictionary.</p>
</dd>
</dl>
<dl class="simple">
<dt>amplitude<span class="classifier">float</span></dt><dd><p>Full amplitude of IEC arcsine distribution. Values will range
from -0.5*amplitude to +0.5*amplitude.</p>
</dd>
<dt>period<span class="classifier">float</span></dt><dd><p>Period in minutes of IEC oscillations. Usually 3-5 minutes.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.opds.OTE_WFE_Drift_Model.gen_delta_opds">
<span class="sig-name descname"><span class="pre">gen_delta_opds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">delta_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_angle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_angle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">45</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">do_thermal</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">do_frill</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">do_iec</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">case</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'BOL'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_wfe_amps</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_dopd_fin</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/opds.html#OTE_WFE_Drift_Model.gen_delta_opds"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.opds.OTE_WFE_Drift_Model.gen_delta_opds" title="Permalink to this definition"></a></dt>
<dd><p>Create series of delta OPDs</p>
<p>Generate a series of delta OPDS, the result of which is
a combination of thermal, frill, and IEC effects. The
thermal and frill values are dependent on time, start/end
slew angles, and case (‘BOL’ or ‘EOL’). Delta OPD contributions
from the IEC heater switching are treated as random state
switches assuming an arcsine distribution.</p>
<dl class="simple">
<dt>delta_time<span class="classifier">astropy.units quantity object</span></dt><dd><p>An array of times assuming astropy units.</p>
</dd>
<dt>start_angle<span class="classifier">float</span></dt><dd><p>The starting sun pitch angle, in degrees between -5 and +45.</p>
</dd>
<dt>end_angle<span class="classifier">float</span></dt><dd><p>The ending sun pitch angle, in degrees between -5 and +45.</p>
</dd>
<dt>case<span class="classifier">string</span></dt><dd><p>Either “BOL” for current best estimate at beginning of life, or
“EOL” for more conservative prediction at end of life.</p>
</dd>
<dt>do_thermal<span class="classifier">bool</span></dt><dd><p>Include thermal slew component? Mostly for debugging purposes.</p>
</dd>
<dt>do_frill<span class="classifier">bool</span></dt><dd><p>Include frill component? Mostly for debugging purposes.</p>
</dd>
<dt>do_iec<span class="classifier">bool</span></dt><dd><p>Include IEC component? Good to exclude if calling this function
repeatedly for evolution of multiple slews, then add IEC later.</p>
</dd>
<dt>return_wfe_amps<span class="classifier">bool</span></dt><dd><p>Return a dictionary that provides the RMS WFE (nm) of each
component at each time step.</p>
</dd>
<dt>return_dopd_fin<span class="classifier">bool</span></dt><dd><p>Option to exclude calculating final delta OPD in case we only
want the final RMS WFE dictionary.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.opds.OTE_WFE_Drift_Model.gen_frill_drift">
<span class="sig-name descname"><span class="pre">gen_frill_drift</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">delta_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_angle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_angle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">45</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">case</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'BOL'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/opds.html#OTE_WFE_Drift_Model.gen_frill_drift"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.opds.OTE_WFE_Drift_Model.gen_frill_drift" title="Permalink to this definition"></a></dt>
<dd><p>Frill WFE drift scaling</p>
<p>Function to determine the factor to scale the delta OPD associated with
frill tensioning. Returns the RMS WFE (nm) depending on time and slew
angles.</p>
<dl class="simple">
<dt>delta_time<span class="classifier">astropy.units quantity object</span></dt><dd><p>The time since a slew occurred.</p>
</dd>
<dt>start_angle<span class="classifier">float</span></dt><dd><p>The starting sun pitch angle, in degrees between -5 and +45</p>
</dd>
<dt>end_angle<span class="classifier">float</span></dt><dd><p>The ending sun pitch angle, in degrees between -5 and +45</p>
</dd>
<dt>case<span class="classifier">string</span></dt><dd><p>either “BOL” for current best estimate at beginning of life, or
“EOL” for more conservative prediction at end of life. The amplitude
of the frill drift is roughly 2x lower for BOL (8.6 nm after 2 days)
versus EOL (18.4 nm after 2 days).</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.opds.OTE_WFE_Drift_Model.gen_iec_series">
<span class="sig-name descname"><span class="pre">gen_iec_series</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">delta_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">amplitude</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">period</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interp_kind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'linear'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/opds.html#OTE_WFE_Drift_Model.gen_iec_series"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.opds.OTE_WFE_Drift_Model.gen_iec_series" title="Permalink to this definition"></a></dt>
<dd><p>Create a series of IEC WFE scale factors</p>
<p>Create a series of random IEC heater state changes based on
arcsine distribution.</p>
<dl class="simple">
<dt>delta_time<span class="classifier">astropy.units quantity object array</span></dt><dd><p>Time series of atropy units to interpolate IEC amplitudes</p>
</dd>
</dl>
<dl class="simple">
<dt>amplitude<span class="classifier">float</span></dt><dd><p>Full amplitude of arcsine distribution. Values will range
from -0.5*amplitude to +0.5*amplitude.</p>
</dd>
<dt>period<span class="classifier">float</span></dt><dd><p>Period in minutes of IEC oscillations. Usually 3-5 minutes.</p>
</dd>
<dt>random_seed<span class="classifier">int</span></dt><dd><p>Provide a random seed value between 0 and (2**32)-1 to generate
reproducible random values.</p>
</dd>
<dt>interp_kind<span class="classifier">str or int</span></dt><dd><p>Specifies the kind of interpolation as a string
(‘linear’, ‘nearest’, ‘zero’, ‘slinear’, ‘quadratic’, ‘cubic’,
‘previous’, ‘next’, where ‘zero’, ‘slinear’, ‘quadratic’ and ‘cubic’
refer to a spline interpolation of zeroth, first, second or third
order; ‘previous’ and ‘next’ simply return the previous or next value
of the point) or as an integer specifying the order of the spline
interpolator to use.
Default is ‘linear’.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.opds.OTE_WFE_Drift_Model.gen_thermal_drift">
<span class="sig-name descname"><span class="pre">gen_thermal_drift</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">delta_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">start_angle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">-</span> <span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_angle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">45</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">case</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'BOL'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/opds.html#OTE_WFE_Drift_Model.gen_thermal_drift"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.opds.OTE_WFE_Drift_Model.gen_thermal_drift" title="Permalink to this definition"></a></dt>
<dd><p>Thermal WFE drift scaling</p>
<p>Function to determine the factor to scale the delta OPD associated with
OTE backplane thermal distortion. Returns the RMS WFE (nm) depending on
time and slew angles.</p>
<dl class="simple">
<dt>delta_time<span class="classifier">astropy.units quantity object</span></dt><dd><p>The time since a slew occurred.</p>
</dd>
<dt>start_angle<span class="classifier">float</span></dt><dd><p>The starting sun pitch angle, in degrees between -5 and +45</p>
</dd>
<dt>end_angle<span class="classifier">float</span></dt><dd><p>The ending sun pitch angle, in degrees between -5 and +45</p>
</dd>
<dt>case<span class="classifier">string</span></dt><dd><p>either “BOL” for current best estimate at beginning of life, or
“EOL” for more conservative prediction at end of life. The amplitude
of the frill drift is roughly 3x lower for BOL (13 nm after 14 days)
versus EOL (43 nm after 14 days).</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.opds.OTE_WFE_Drift_Model.interp_dopds">
<span class="sig-name descname"><span class="pre">interp_dopds</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">delta_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dopds</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dt_new</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wfe_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">interp_kind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'linear'</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/opds.html#OTE_WFE_Drift_Model.interp_dopds"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.opds.OTE_WFE_Drift_Model.interp_dopds" title="Permalink to this definition"></a></dt>
<dd><p>Interpolate an array of delta OPDs
Perform a linear interpolation on a series of delta OPDS.
Parameters
———-
delta_time : astropy.units quantity object</p>
<blockquote>
<div><p>An array of times assuming astropy units corresponding to each <cite>dopd</cite>.</p>
</div></blockquote>
<dl class="simple">
<dt>dopds<span class="classifier">ndarray</span></dt><dd><p>Array of delta OPD images associated with <cite>delta_time</cite>.</p>
</dd>
<dt>dt_new<span class="classifier">astropy.units quantity object</span></dt><dd><p>New array to interpolate onto.</p>
</dd>
</dl>
<dl class="simple">
<dt>wfe_dict<span class="classifier">dict or None</span></dt><dd><p>If specified, then must provide a dictionary where the values
for each keywords are the WFE drift components associated with
each <cite>delta_time</cite>. Will then return a dictionary</p>
</dd>
<dt>interp_kind<span class="classifier">str or int</span></dt><dd><p>Specifies the kind of interpolation as a string
(‘linear’, ‘nearest’, ‘zero’, ‘slinear’, ‘quadratic’, ‘cubic’,
‘previous’, ‘next’, where ‘zero’, ‘slinear’, ‘quadratic’ and ‘cubic’
refer to a spline interpolation of zeroth, first, second or third
order; ‘previous’ and ‘next’ simply return the previous or next value
of the point) or as an integer specifying the order of the spline
interpolator to use.
Default is ‘linear’.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.opds.OTE_WFE_Drift_Model.opds_as_hdul">
<span class="sig-name descname"><span class="pre">opds_as_hdul</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">delta_time</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slew_angles</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delta_opds</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wfe_dict</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">case</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_main_opd</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slew_averages</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_ind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/opds.html#OTE_WFE_Drift_Model.opds_as_hdul"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.opds.OTE_WFE_Drift_Model.opds_as_hdul" title="Permalink to this definition"></a></dt>
<dd><p>Convert series of delta OPDS to HDUList</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.opds.OTE_WFE_Drift_Model.reset">
<span class="sig-name descname"><span class="pre">reset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/opds.html#OTE_WFE_Drift_Model.reset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.opds.OTE_WFE_Drift_Model.reset" title="Permalink to this definition"></a></dt>
<dd><p>Reset an OPD to the state it was loaded from disk.
i.e. undo all segment moves.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.opds.OTE_WFE_Drift_Model.slew_pos_averages">
<span class="sig-name descname"><span class="pre">slew_pos_averages</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">delta_time</span></em>, <em class="sig-param"><span class="pre">slew_angles</span></em>, <em class="sig-param"><span class="pre">opds=None</span></em>, <em class="sig-param"><span class="pre">wfe_dict=None</span></em>, <em class="sig-param"><span class="pre">mn_func=&lt;function</span> <span class="pre">mean&gt;</span></em>, <em class="sig-param"><span class="pre">interpolate=False</span></em>, <em class="sig-param"><span class="pre">**kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/opds.html#OTE_WFE_Drift_Model.slew_pos_averages"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.opds.OTE_WFE_Drift_Model.slew_pos_averages" title="Permalink to this definition"></a></dt>
<dd><p>Get averages at each slew position
Given a series of times and slew angles, calculate the average OPD and
WFE RMS error within each slew angle position. Returns a tuple with new
arrays of (dt_new, opds_new, wfe_dict_new).</p>
<p>If input both <cite>opds</cite> and <cite>wfe_dict</cite> are not specified, then we call
the <cite>evolve_dopd</cite> function and return .</p>
<dl class="simple">
<dt>delta_time<span class="classifier">astropy.units quantity object</span></dt><dd><p>An array of times assuming astropy units.</p>
</dd>
<dt>slew_angles<span class="classifier">ndarray</span></dt><dd><p>The sun pitch angles at each <cite>delta_time</cite>, in degrees between -5 and +45.</p>
</dd>
<dt>opds<span class="classifier">ndarray or None</span></dt><dd><p>Cube of OPD images (or delta OPDs) associated with each <cite>delta_time</cite>.
If set to None, then a new set of OPDs are not calculated.</p>
</dd>
<dt>wfe_dict<span class="classifier">dict or None</span></dt><dd><p>If specified, then must provide a dictionary where the values
for each keywords are the WFE drift components associated with
each <cite>delta_time</cite>. New set of WFE dictionary is not calculated if set
to None.</p>
</dd>
<dt>mn_func<span class="classifier">function</span></dt><dd><p>Function to use for taking averages. Default: np.mean()</p>
</dd>
<dt>interpolate<span class="classifier">bool</span></dt><dd><p>Instead of taking average, use the interpolation function <cite>self.interp_dopds()</cite>.</p>
</dd>
</dl>
<dl class="simple">
<dt>case<span class="classifier">string</span></dt><dd><p>Either “BOL” for current best estimate at beginning of life, or
“EOL” for more conservative prediction at end of life.</p>
</dd>
<dt>do_thermal<span class="classifier">bool</span></dt><dd><p>Include thermal slew component? Mostly for debugging purposes.</p>
</dd>
<dt>do_frill<span class="classifier">bool</span></dt><dd><p>Include frill component? Mostly for debugging purposes.</p>
</dd>
<dt>do_iec<span class="classifier">bool</span></dt><dd><p>Include IEC component? Good to exclude if calling this function
repeatedly for evolution of multiple slews, then add IEC later.</p>
</dd>
<dt>amplitude<span class="classifier">float</span></dt><dd><p>Full amplitude of IEC arcsine distribution. Values will range
from -0.5*amplitude to +0.5*amplitude.</p>
</dd>
<dt>period<span class="classifier">float</span></dt><dd><p>Period in minutes of IEC oscillations. Usually 3-5 minutes.</p>
</dd>
<dt>kind<span class="classifier">str or int</span></dt><dd><p>Specifies the kind of interpolation (if specified) as a string.
Default: ‘linear’.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.opds.OTE_WFE_Drift_Model.slew_scaling">
<span class="sig-name descname"><span class="pre">slew_scaling</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start_angle</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end_angle</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/opds.html#OTE_WFE_Drift_Model.slew_scaling"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.opds.OTE_WFE_Drift_Model.slew_scaling" title="Permalink to this definition"></a></dt>
<dd><p>WFE scaling due to slew angle</p>
<p>Scale the WSS Hexike components based on slew pitch angles.</p>
<dl class="simple">
<dt>start_angle<span class="classifier">float</span></dt><dd><p>The starting sun pitch angle, in degrees between -5 and +45</p>
</dd>
<dt>end_angle<span class="classifier">float</span></dt><dd><p>The ending sun pitch angle, in degrees between -5 and +45</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.opds.plot_im">
<span class="sig-prename descclassname"><span class="pre">pancake.opds.</span></span><span class="sig-name descname"><span class="pre">plot_im</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">im</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fig</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ax</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vlim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_cbar</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_ax</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extent</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/opds.html#plot_im"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.opds.plot_im" title="Permalink to this definition"></a></dt>
<dd><p>Plot single image on some axes</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.opds.plot_opd">
<span class="sig-prename descclassname"><span class="pre">pancake.opds.</span></span><span class="sig-name descname"><span class="pre">plot_opd</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hdul</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">index</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">opd0</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vlim1</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">vlim2</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/opds.html#plot_opd"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.opds.plot_opd" title="Permalink to this definition"></a></dt>
<dd><p>Plot OPDs images (full and delta)</p>
</dd></dl>

</section>
<section id="module-pancake.pandeia_subclasses">
<span id="pancake-pandeia-subclasses-module"></span><h2>pancake.pandeia_subclasses module<a class="headerlink" href="#module-pancake.pandeia_subclasses" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyConvolvedSceneCube">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">pancake.pandeia_subclasses.</span></span><span class="sig-name descname"><span class="pre">CoronagraphyConvolvedSceneCube</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scene</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instrument</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/pandeia_subclasses.html#CoronagraphyConvolvedSceneCube"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyConvolvedSceneCube" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pandeia.engine.astro_spectrum.ConvolvedSceneCube</span></code></p>
<p>This class overrides the ConvolvedSceneCube class, and instead of using SPECTRAL_MAX_SAMPLES it
looks for a wavelength size that should be present in the ‘scene’ part of the template</p>
<p>background=None, psf_library=None, webapp=False, empty_scene=False</p>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyDetectorSignal">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">pancake.pandeia_subclasses.</span></span><span class="sig-name descname"><span class="pre">CoronagraphyDetectorSignal</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="pre">observation</span></em>, <em class="sig-param"><span class="pre">calc_config=&lt;pandeia.engine.etc3D.CalculationConfig</span> <span class="pre">object&gt;</span></em>, <em class="sig-param"><span class="pre">**kwargs</span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/pandeia_subclasses.html#CoronagraphyDetectorSignal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyDetectorSignal" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference internal" href="#pancake.pandeia_subclasses.CoronagraphyConvolvedSceneCube" title="pancake.pandeia_subclasses.CoronagraphyConvolvedSceneCube"><code class="xref py py-class docutils literal notranslate"><span class="pre">pancake.pandeia_subclasses.CoronagraphyConvolvedSceneCube</span></code></a></p>
<p>Override the DetectorSignal to avoid odd issues with inheritance. Unfortunately this currently
means copying the functions entirely (with changes to which class is used)</p>
<p>webapp=False, order=None, empty_scene=False</p>
<dl class="py method">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyDetectorSignal.all_rates">
<span class="sig-name descname"><span class="pre">all_rates</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flux</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_extended_background</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/pandeia_subclasses.html#CoronagraphyDetectorSignal.all_rates"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyDetectorSignal.all_rates" title="Permalink to this definition"></a></dt>
<dd><p>Calculate rates in e-/s/pixel/micron or e-/s/pixel given a flux cube in mJy</p>
<dl class="simple">
<dt>flux: ConvolvedSceneCube instance</dt><dd><p>Convolved source flux cube with flux units in mJy</p>
</dd>
<dt>add_extended_background: bool (default=False)</dt><dd><p>Toggle for including extended background not contained within the flux cube</p>
</dd>
</dl>
<dl class="simple">
<dt>products: dict</dt><dd><dl class="simple">
<dt>Dict of products produced by rate calculation.</dt><dd><p>‘wave_pix’ - Mapping of wavelength to detector pixels
‘ote’ - Source rate at the telescope aperture
‘fp’ - Source rate at the focal plane in e-/s/pixel/micron
‘fp_pix’ - Source rate per pixel
‘fp_pix_no_ipc’ - Source rate per pixel excluding effects if inter-pixel capacitance</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyDetectorSignal.focal_plane_rate">
<span class="sig-name descname"><span class="pre">focal_plane_rate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rate</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/pandeia_subclasses.html#CoronagraphyDetectorSignal.focal_plane_rate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyDetectorSignal.focal_plane_rate" title="Permalink to this definition"></a></dt>
<dd><p>Takes the output from self.ote_rate() and multiplies it by the components
of efficiency within the system and returns the source rate at the focal plane in
e-/s/pixel/micron.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyDetectorSignal.get_bg_fp_rate">
<span class="sig-name descname"><span class="pre">get_bg_fp_rate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/pandeia_subclasses.html#CoronagraphyDetectorSignal.get_bg_fp_rate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyDetectorSignal.get_bg_fp_rate" title="Permalink to this definition"></a></dt>
<dd><p>Calculate background in e-/s/pixel/micron at the focal plane. Also correct for any excess in predicted background
if there are pupil losses in the PSF. (#2529)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyDetectorSignal.get_bg_pix_rate">
<span class="sig-name descname"><span class="pre">get_bg_pix_rate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/pandeia_subclasses.html#CoronagraphyDetectorSignal.get_bg_pix_rate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyDetectorSignal.get_bg_pix_rate" title="Permalink to this definition"></a></dt>
<dd><p>Calculate the background on the detector in e-/s/pixel</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyDetectorSignal.get_fp_rate">
<span class="sig-name descname"><span class="pre">get_fp_rate</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/pandeia_subclasses.html#CoronagraphyDetectorSignal.get_fp_rate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyDetectorSignal.get_fp_rate" title="Permalink to this definition"></a></dt>
<dd><p>Return scene flux at the focal plane in e-/s/pixel/micron (excludes background)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyDetectorSignal.get_pix_grid">
<span class="sig-name descname"><span class="pre">get_pix_grid</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rate</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/pandeia_subclasses.html#CoronagraphyDetectorSignal.get_pix_grid"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyDetectorSignal.get_pix_grid" title="Permalink to this definition"></a></dt>
<dd><p>Generate the coordinate grid of the detector plane</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyDetectorSignal.get_projection_type">
<span class="sig-name descname"><span class="pre">get_projection_type</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/pandeia_subclasses.html#CoronagraphyDetectorSignal.get_projection_type"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyDetectorSignal.get_projection_type" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyDetectorSignal.get_saturation_mask">
<span class="sig-name descname"><span class="pre">get_saturation_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rate</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/pandeia_subclasses.html#CoronagraphyDetectorSignal.get_saturation_mask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyDetectorSignal.get_saturation_mask" title="Permalink to this definition"></a></dt>
<dd><p>Compute a numpy array indicating pixels with full saturation (2), partial saturation (1) and no saturation (0).</p>
<dl class="simple">
<dt>rate: None or 2D np.ndarray</dt><dd><p>Detector plane rate image used to build saturation map from</p>
</dd>
</dl>
<dl class="simple">
<dt>mask: 2D np.ndarray</dt><dd><p>Saturation mask image</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyDetectorSignal.get_wave_pix">
<span class="sig-name descname"><span class="pre">get_wave_pix</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/pandeia_subclasses.html#CoronagraphyDetectorSignal.get_wave_pix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyDetectorSignal.get_wave_pix" title="Permalink to this definition"></a></dt>
<dd><p>Return the mapping of wavelengths to pixels on the detector plane</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyDetectorSignal.image_rate">
<span class="sig-name descname"><span class="pre">image_rate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rate</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/pandeia_subclasses.html#CoronagraphyDetectorSignal.image_rate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyDetectorSignal.image_rate" title="Permalink to this definition"></a></dt>
<dd><p>Calculate the electron rate for imaging modes by integrating along
the wavelength direction of the cube.</p>
<dl class="simple">
<dt>rate: numpy.ndarray</dt><dd><p>Rate of photons interacting with detector as a function of model wavelength set</p>
</dd>
</dl>
<dl class="simple">
<dt>products: 2-element tuple of numpy.ndarrays</dt><dd><p>first element - electron rate per pixel
second element - variance of electron rate per pixel</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyDetectorSignal.ipc_convolve">
<span class="sig-name descname"><span class="pre">ipc_convolve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rate</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kernel</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/pandeia_subclasses.html#CoronagraphyDetectorSignal.ipc_convolve"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyDetectorSignal.ipc_convolve" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyDetectorSignal.on_detector">
<span class="sig-name descname"><span class="pre">on_detector</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rate_list</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/pandeia_subclasses.html#CoronagraphyDetectorSignal.on_detector"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyDetectorSignal.on_detector" title="Permalink to this definition"></a></dt>
<dd><p>This will take the list of (pixel) rates and use them create a single detector frame. A single
image will only have one rate in the list, but the IFUs will have n_slices. There may be other examples,
such as different spectral orders for NIRISS. It is not yet clear how many different flavors there are, so
this step may get refactored if it gets too complicated. Observing modes that only have one set of rates
(imaging and single-slit spectroscopy, for instance) will still go through this, but the operation is trivial.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyDetectorSignal.ote_rate">
<span class="sig-name descname"><span class="pre">ote_rate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">flux</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/pandeia_subclasses.html#CoronagraphyDetectorSignal.ote_rate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyDetectorSignal.ote_rate" title="Permalink to this definition"></a></dt>
<dd><p>Calculate source rate in e-/s/pixel/micron at the telescope entrance aperture given
a flux cube in mJy/pixel.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyDetectorSignal.slitless_rate">
<span class="sig-name descname"><span class="pre">slitless_rate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rate</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">add_extended_background</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/pandeia_subclasses.html#CoronagraphyDetectorSignal.slitless_rate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyDetectorSignal.slitless_rate" title="Permalink to this definition"></a></dt>
<dd><p>Calculate the detector rates for slitless modes. Here we retain all spatial information and build
up the detector plane by shifting and coadding the frames from the convolved flux cube. Also need to handle
and add background that comes from outside the flux cube, but needs to be accounted for.</p>
<dl class="simple">
<dt>rate: 3D numpy.ndarray</dt><dd><p>Cube containing the flux rate at the focal plane</p>
</dd>
<dt>add_extended_background: bool (default: True)</dt><dd><p>Toggle for including extended background not contained within the flux cube</p>
</dd>
</dl>
<dl class="simple">
<dt>products: 2 entry tuple</dt><dd><p>wave_pix: 1D numpy.ndarray containing wavelength to pixel mapping on the detector plane
spec_rate: 2D numpy.ndarray of detector count rates</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyDetectorSignal.spec_rate">
<span class="sig-name descname"><span class="pre">spec_rate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rate</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/pandeia_subclasses.html#CoronagraphyDetectorSignal.spec_rate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyDetectorSignal.spec_rate" title="Permalink to this definition"></a></dt>
<dd><p>For slitted spectrographs, calculate the detector signal by integrating
along the dispersion direction of the cube (which is masked by a, by assumption,
narrow slit). For slitless systems or slits wider than the PSF, the slitless_rate
method should be used to preserve spatial information within the slit.</p>
<dl class="simple">
<dt>rate: numpy.ndarray</dt><dd><p>Rate of photons interacting with detector as a function of model wavelength set</p>
</dd>
</dl>
<dl class="simple">
<dt>products: 3-element tuple of numpy.ndarrays</dt><dd><p>first element - map of pixel to wavelength
second element - electron rate per pixel
third element - variance of electron rate per pixel</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyDetectorSignal.spectral_detector_transform">
<span class="sig-name descname"><span class="pre">spectral_detector_transform</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/pandeia_subclasses.html#CoronagraphyDetectorSignal.spectral_detector_transform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyDetectorSignal.spectral_detector_transform" title="Permalink to this definition"></a></dt>
<dd><p>Create engine API format dict section containing properties of wavelength coordinates
at the detector plane.</p>
<p>t: dict (engine API compliant keys)</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyDetectorSignal.wave_eff">
<span class="sig-name descname"><span class="pre">wave_eff</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rate</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/pandeia_subclasses.html#CoronagraphyDetectorSignal.wave_eff"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyDetectorSignal.wave_eff" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyDetectorSignal.wcs_info">
<span class="sig-name descname"><span class="pre">wcs_info</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/pandeia_subclasses.html#CoronagraphyDetectorSignal.wcs_info"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyDetectorSignal.wcs_info" title="Permalink to this definition"></a></dt>
<dd><p>Get detector coordinate transform as a dict of WCS keyword/value pairs.</p>
<dl class="simple">
<dt>header: dict</dt><dd><p>WCS header keys defining coordinate transform in the detector plane</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyPSFLibrary">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">pancake.pandeia_subclasses.</span></span><span class="sig-name descname"><span class="pre">CoronagraphyPSFLibrary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aperture</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/pandeia_subclasses.html#CoronagraphyPSFLibrary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyPSFLibrary" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pandeia.engine.psf_library.PSFLibrary</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Subclass of the Pandeia PSFLibrary class, intended to allow PSFs to be generated on-the-fly
via webbpsf rather than using cached PSFs</p>
<dl class="py method">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyPSFLibrary.associate_offset_to_source">
<span class="sig-name descname"><span class="pre">associate_offset_to_source</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sources</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instrument</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aperture_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/pandeia_subclasses.html#CoronagraphyPSFLibrary.associate_offset_to_source"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyPSFLibrary.associate_offset_to_source" title="Permalink to this definition"></a></dt>
<dd><p>Added azimuth information for use with webbpsf. Pandeia currently does not calculate
the PA and assumes azimuthal symmetry resulting in incorrect calculations when using
the bar coronagraph.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyPSFLibrary.calc_psf">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">calc_psf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ins</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wave</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">offset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oversample</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pix_scale</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fov_pixels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trim_fov_pixels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/pandeia_subclasses.html#CoronagraphyPSFLibrary.calc_psf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyPSFLibrary.calc_psf" title="Permalink to this definition"></a></dt>
<dd><p>Following the treatment in pandeia_data/dev/make_psf.py to handle
off-center PSFs for use as a kernel in later convolutions.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyPSFLibrary.fov_pixels">
<span class="sig-name descname"><span class="pre">fov_pixels</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'fqpm1065':</span> <span class="pre">81,</span> <span class="pre">'fqpm1140':</span> <span class="pre">81,</span> <span class="pre">'fqpm1550':</span> <span class="pre">81,</span> <span class="pre">'lyot2300':</span> <span class="pre">81,</span> <span class="pre">'mask210r':</span> <span class="pre">101,</span> <span class="pre">'mask335r':</span> <span class="pre">101,</span> <span class="pre">'mask430r':</span> <span class="pre">101,</span> <span class="pre">'masklwb':</span> <span class="pre">351,</span> <span class="pre">'maskswb':</span> <span class="pre">351}</span></em><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyPSFLibrary.fov_pixels" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyPSFLibrary.get_cached_psf">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">get_cached_psf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wave</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instrument</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aperture_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oversample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">otf_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_aperture</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/pandeia_subclasses.html#CoronagraphyPSFLibrary.get_cached_psf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyPSFLibrary.get_cached_psf" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyPSFLibrary.get_pix_scale">
<span class="sig-name descname"><span class="pre">get_pix_scale</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instrument</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aperture_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/pandeia_subclasses.html#CoronagraphyPSFLibrary.get_pix_scale"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyPSFLibrary.get_pix_scale" title="Permalink to this definition"></a></dt>
<dd><p>Get PSF pixel scale for given instrument/aperture.</p>
<p>OVERRIDE Pandeia so as to make sure that the pixel scale comes out correctly.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyPSFLibrary.get_psf">
<span class="sig-name descname"><span class="pre">get_psf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wave</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instrument</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aperture_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oversample</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">source_offset</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">(0,</span> <span class="pre">0)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">otf_options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">full_aperture</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/pandeia_subclasses.html#CoronagraphyPSFLibrary.get_psf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyPSFLibrary.get_psf" title="Permalink to this definition"></a></dt>
<dd><p>Get PSF given wavelength, instrument, instrument aperture, and optionally source xy offset coordinates.
Values are interpolated linearly between the two PSF library entries that bracket the given wavelength.</p>
<dl class="simple">
<dt>wave: float</dt><dd><p>Desired wavelength for the PSF</p>
</dd>
<dt>instrument: str</dt><dd><p>Instrument name</p>
</dd>
<dt>aperture_name: str</dt><dd><p>Name of the instrument aperture</p>
</dd>
</dl>
<dl class="simple">
<dt>psf: dict</dt><dd><p>Dict containing the PSF and associated information</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyPSFLibrary.get_pupil_throughput">
<span class="sig-name descname"><span class="pre">get_pupil_throughput</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">wave</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">instrument</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">aperture_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/pandeia_subclasses.html#CoronagraphyPSFLibrary.get_pupil_throughput"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyPSFLibrary.get_pupil_throughput" title="Permalink to this definition"></a></dt>
<dd><p>Intended for pandeia 1.2 compatibility.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyPSFLibrary.image_mask">
<span class="sig-name descname"><span class="pre">image_mask</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'fqpm1065':</span> <span class="pre">'FQPM1065',</span> <span class="pre">'fqpm1140':</span> <span class="pre">'FQPM1140',</span> <span class="pre">'fqpm1550':</span> <span class="pre">'FQPM1550',</span> <span class="pre">'lyot2300':</span> <span class="pre">'LYOT2300',</span> <span class="pre">'mask210r':</span> <span class="pre">'MASK210R',</span> <span class="pre">'mask335r':</span> <span class="pre">'MASK335R',</span> <span class="pre">'mask430r':</span> <span class="pre">'MASK430R',</span> <span class="pre">'masklwb':</span> <span class="pre">'MASKLWB',</span> <span class="pre">'maskswb':</span> <span class="pre">'MASKSWB'}</span></em><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyPSFLibrary.image_mask" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyPSFLibrary.nircam_mode">
<span class="sig-name descname"><span class="pre">nircam_mode</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'fqpm1065':</span> <span class="pre">'imaging',</span> <span class="pre">'fqpm1140':</span> <span class="pre">'imaging',</span> <span class="pre">'fqpm1550':</span> <span class="pre">'imaging',</span> <span class="pre">'lyot2300':</span> <span class="pre">'imaging',</span> <span class="pre">'mask210r':</span> <span class="pre">'sw_imaging',</span> <span class="pre">'mask335r':</span> <span class="pre">'lw_imaging',</span> <span class="pre">'mask430r':</span> <span class="pre">'lw_imaging',</span> <span class="pre">'masklwb':</span> <span class="pre">'lw_imaging',</span> <span class="pre">'maskswb':</span> <span class="pre">'sw_imaging'}</span></em><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyPSFLibrary.nircam_mode" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyPSFLibrary.parse_aperture">
<em class="property"><span class="pre">static</span> </em><span class="sig-name descname"><span class="pre">parse_aperture</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">aperture_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/pandeia_subclasses.html#CoronagraphyPSFLibrary.parse_aperture"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyPSFLibrary.parse_aperture" title="Permalink to this definition"></a></dt>
<dd><p>Return [image mask, pupil mask, fov_pixels, trim_fov_pixels, pixelscale]</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyPSFLibrary.pupil_mask">
<span class="sig-name descname"><span class="pre">pupil_mask</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'fqpm1065':</span> <span class="pre">'MASKFQPM',</span> <span class="pre">'fqpm1140':</span> <span class="pre">'MASKFQPM',</span> <span class="pre">'fqpm1550':</span> <span class="pre">'MASKFQPM',</span> <span class="pre">'lyot2300':</span> <span class="pre">'MASKLYOT',</span> <span class="pre">'mask210r':</span> <span class="pre">'CIRCLYOT',</span> <span class="pre">'mask335r':</span> <span class="pre">'CIRCLYOT',</span> <span class="pre">'mask430r':</span> <span class="pre">'CIRCLYOT',</span> <span class="pre">'masklwb':</span> <span class="pre">'WEDGELYOT',</span> <span class="pre">'maskswb':</span> <span class="pre">'WEDGELYOT'}</span></em><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyPSFLibrary.pupil_mask" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.CoronagraphyPSFLibrary.trim_fov_pixels">
<span class="sig-name descname"><span class="pre">trim_fov_pixels</span></span><em class="property"> <span class="pre">=</span> <span class="pre">{'fqpm1065':</span> <span class="pre">None,</span> <span class="pre">'fqpm1140':</span> <span class="pre">None,</span> <span class="pre">'fqpm1550':</span> <span class="pre">None,</span> <span class="pre">'lyot2300':</span> <span class="pre">None,</span> <span class="pre">'mask210r':</span> <span class="pre">None,</span> <span class="pre">'mask335r':</span> <span class="pre">None,</span> <span class="pre">'mask430r':</span> <span class="pre">None,</span> <span class="pre">'masklwb':</span> <span class="pre">101,</span> <span class="pre">'maskswb':</span> <span class="pre">101}</span></em><a class="headerlink" href="#pancake.pandeia_subclasses.CoronagraphyPSFLibrary.trim_fov_pixels" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="pancake.pandeia_subclasses.SeparateTargetReferenceCoronagraphy">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">pancake.pandeia_subclasses.</span></span><span class="sig-name descname"><span class="pre">SeparateTargetReferenceCoronagraphy</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instrument</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">webapp</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">{}</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/pandeia_subclasses.html#SeparateTargetReferenceCoronagraphy"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.pandeia_subclasses.SeparateTargetReferenceCoronagraphy" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">pandeia.engine.strategy.Coronagraphy</span></code></p>
<p>This class is intended to override the cronography behaviour of requiring that the reference
source be included in the same calculation template as the observation source.</p>
</dd></dl>

</section>
<section id="module-pancake.scene">
<span id="pancake-scene-module"></span><h2>pancake.scene module<a class="headerlink" href="#module-pancake.scene" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="pancake.scene.Scene">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">pancake.scene.</span></span><span class="sig-name descname"><span class="pre">Scene</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/scene.html#Scene"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.scene.Scene" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="pancake.scene.Scene.add_source">
<span class="sig-name descname"><span class="pre">add_source</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'simbad'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/scene.html#Scene.add_source"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.scene.Scene.add_source" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.scene.Scene.offset_scene">
<span class="sig-name descname"><span class="pre">offset_scene</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/scene.html#Scene.offset_scene"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.scene.Scene.offset_scene" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.scene.Scene.plot_scene">
<span class="sig-name descname"><span class="pre">plot_scene</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">newfig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/scene.html#Scene.plot_scene"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.scene.Scene.plot_scene" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.scene.Scene.plot_source_spectra">
<span class="sig-name descname"><span class="pre">plot_source_spectra</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sources</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">newfig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/scene.html#Scene.plot_source_spectra"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.scene.Scene.plot_source_spectra" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.scene.Scene.renormalise_source">
<span class="sig-name descname"><span class="pre">renormalise_source</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">norm_val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">norm_unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'vegamag'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">norm_bandpass</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'2mass_ks'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/scene.html#Scene.renormalise_source"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.scene.Scene.renormalise_source" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.scene.Scene.rotate_scene">
<span class="sig-name descname"><span class="pre">rotate_scene</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[0.0,</span> <span class="pre">0.0]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">direction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'counter_clockwise'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/scene.html#Scene.rotate_scene"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.scene.Scene.rotate_scene" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="pancake.scene.Scene.source_magnitude">
<span class="sig-name descname"><span class="pre">source_magnitude</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filt</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/scene.html#Scene.source_magnitude"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.scene.Scene.source_magnitude" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.scene.create_SGD">
<span class="sig-prename descclassname"><span class="pre">pancake.scene.</span></span><span class="sig-name descname"><span class="pre">create_SGD</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ta_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fsm_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stepsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.02</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pattern_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sim_num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/scene.html#create_SGD"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.scene.create_SGD" title="Permalink to this definition"></a></dt>
<dd><p>Create small grid dither pointing set. There are two
ways to specify dither patterns:</p>
<blockquote>
<div><p>ta_error : add TA error to each point in the SGD?</p>
<p>stepsize : floating point value for a 3x3 grid.</p>
<dl class="simple">
<dt>pattern_name<span class="classifier">string name of a pattern corresponding to</span></dt><dd><p>one of the named dither patterns in APT.</p>
</dd>
</dl>
</div></blockquote>
<p>If you specify pattern_name, then stepsize is ignored.</p>
<p>See <a class="reference external" href="https://jwst-docs-stage.stsci.edu/display/JTI/NIRCam+Small-Grid+Dithers">https://jwst-docs-stage.stsci.edu/display/JTI/NIRCam+Small-Grid+Dithers</a>
for information on the available dither patterns and their names.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.scene.get_fsm_error">
<span class="sig-prename descclassname"><span class="pre">pancake.scene.</span></span><span class="sig-name descname"><span class="pre">get_fsm_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/scene.html#get_fsm_error"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.scene.get_fsm_error" title="Permalink to this definition"></a></dt>
<dd><p>2mas 1/sigma/axis error from the fine steering mirror</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.scene.get_ta_error">
<span class="sig-prename descclassname"><span class="pre">pancake.scene.</span></span><span class="sig-name descname"><span class="pre">get_ta_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/scene.html#get_ta_error"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.scene.get_ta_error" title="Permalink to this definition"></a></dt>
<dd><p>5mas 1-sigma/axis error (~7mas radial)</p>
</dd></dl>

</section>
<section id="module-0">
<span id="pancake-sequence-module"></span><h2>pancake.sequence module<a class="headerlink" href="#module-0" title="Permalink to this headline"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="id0">
<em class="property"><span class="pre">class</span> </em><span class="sig-prename descclassname"><span class="pre">pancake.scene.</span></span><span class="sig-name descname"><span class="pre">Scene</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/scene.html#Scene"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id0" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<dl class="py method">
<dt class="sig sig-object py" id="id1">
<span class="sig-name descname"><span class="pre">add_source</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">kind</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'simbad'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">r</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/scene.html#Scene.add_source"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id1" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id2">
<span class="sig-name descname"><span class="pre">offset_scene</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">x</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/scene.html#Scene.offset_scene"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id2" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id3">
<span class="sig-name descname"><span class="pre">plot_scene</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">newfig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/scene.html#Scene.plot_scene"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id3" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id4">
<span class="sig-name descname"><span class="pre">plot_source_spectra</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">sources</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">newfig</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/scene.html#Scene.plot_source_spectra"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id4" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id5">
<span class="sig-name descname"><span class="pre">renormalise_source</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">norm_val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">norm_unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'vegamag'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">norm_bandpass</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'2mass_ks'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/scene.html#Scene.renormalise_source"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id5" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id6">
<span class="sig-name descname"><span class="pre">rotate_scene</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[0.0,</span> <span class="pre">0.0]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">direction</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'counter_clockwise'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/scene.html#Scene.rotate_scene"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id6" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="id7">
<span class="sig-name descname"><span class="pre">source_magnitude</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">source</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filt</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/scene.html#Scene.source_magnitude"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id7" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id8">
<span class="sig-prename descclassname"><span class="pre">pancake.scene.</span></span><span class="sig-name descname"><span class="pre">create_SGD</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ta_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fsm_error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stepsize</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.02</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pattern_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sim_num</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/scene.html#create_SGD"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id8" title="Permalink to this definition"></a></dt>
<dd><p>Create small grid dither pointing set. There are two
ways to specify dither patterns:</p>
<blockquote>
<div><p>ta_error : add TA error to each point in the SGD?</p>
<p>stepsize : floating point value for a 3x3 grid.</p>
<dl class="simple">
<dt>pattern_name<span class="classifier">string name of a pattern corresponding to</span></dt><dd><p>one of the named dither patterns in APT.</p>
</dd>
</dl>
</div></blockquote>
<p>If you specify pattern_name, then stepsize is ignored.</p>
<p>See <a class="reference external" href="https://jwst-docs-stage.stsci.edu/display/JTI/NIRCam+Small-Grid+Dithers">https://jwst-docs-stage.stsci.edu/display/JTI/NIRCam+Small-Grid+Dithers</a>
for information on the available dither patterns and their names.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id9">
<span class="sig-prename descclassname"><span class="pre">pancake.scene.</span></span><span class="sig-name descname"><span class="pre">get_fsm_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/scene.html#get_fsm_error"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id9" title="Permalink to this definition"></a></dt>
<dd><p>2mas 1/sigma/axis error from the fine steering mirror</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="id10">
<span class="sig-prename descclassname"><span class="pre">pancake.scene.</span></span><span class="sig-name descname"><span class="pre">get_ta_error</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">error</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'default'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/scene.html#get_ta_error"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#id10" title="Permalink to this definition"></a></dt>
<dd><p>5mas 1-sigma/axis error (~7mas radial)</p>
</dd></dl>

</section>
<section id="module-pancake.transformations">
<span id="pancake-transformations-module"></span><h2>pancake.transformations module<a class="headerlink" href="#module-pancake.transformations" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pancake.transformations.affine_transform">
<span class="sig-prename descclassname"><span class="pre">pancake.transformations.</span></span><span class="sig-name descname"><span class="pre">affine_transform</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">theta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/transformations.html#affine_transform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.transformations.affine_transform" title="Permalink to this definition"></a></dt>
<dd><p>theta = deg
center = x, y</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.transformations.align_fourierLSQ">
<span class="sig-prename descclassname"><span class="pre">pancake.transformations.</span></span><span class="sig-name descname"><span class="pre">align_fourierLSQ</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">reference</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/transformations.html#align_fourierLSQ"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.transformations.align_fourierLSQ" title="Permalink to this definition"></a></dt>
<dd><p>LSQ optimization with Fourier shift alignment</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>reference</strong> – nd array
N x K image to be aligned to</p></li>
<li><p><strong>target</strong> – nd array
N x K image to align to reference</p></li>
<li><p><strong>mask</strong> – nd array, optional
N x K image indicating pixels to ignore when
performing the minimization. The masks acts as
a weighting function in performing the fit.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>list</dt><dd><p>[x, y, beta] values from LSQ optimization, where (x, y)
are the misalignment of target from reference and beta
is the fraction by which the target intensity must be
reduced to match the intensity of the reference.</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>results</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.transformations.cart_to_polar">
<span class="sig-prename descclassname"><span class="pre">pancake.transformations.</span></span><span class="sig-name descname"><span class="pre">cart_to_polar</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xy</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/transformations.html#cart_to_polar"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.transformations.cart_to_polar" title="Permalink to this definition"></a></dt>
<dd><p>convert separations into offset, theta</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.transformations.fourier_imshift">
<span class="sig-prename descclassname"><span class="pre">pancake.transformations.</span></span><span class="sig-name descname"><span class="pre">fourier_imshift</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">image</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xshift</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">yshift</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/transformations.html#fourier_imshift"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.transformations.fourier_imshift" title="Permalink to this definition"></a></dt>
<dd><p>Shift an image by use of Fourier shift theorem</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>image</strong> – nd array
N x K image</p></li>
<li><p><strong>xshift</strong> – float
Pixel value by which to shift image in the x direction</p></li>
<li><p><strong>yshift</strong> – float
Pixel value by which to shift image in the y direction</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p><dl class="simple">
<dt>nd array</dt><dd><p>Shifted image</p>
</dd>
</dl>
</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>offset</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.transformations.polar_to_cart">
<span class="sig-prename descclassname"><span class="pre">pancake.transformations.</span></span><span class="sig-name descname"><span class="pre">polar_to_cart</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">r</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/transformations.html#polar_to_cart"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.transformations.polar_to_cart" title="Permalink to this definition"></a></dt>
<dd><p>convert from polar to cartesian,
assuming theta in degrees</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.transformations.rotate">
<span class="sig-prename descclassname"><span class="pre">pancake.transformations.</span></span><span class="sig-name descname"><span class="pre">rotate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">xy</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">theta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">center</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/transformations.html#rotate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.transformations.rotate" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.transformations.shift_subtract">
<span class="sig-prename descclassname"><span class="pre">pancake.transformations.</span></span><span class="sig-name descname"><span class="pre">shift_subtract</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">reference</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">target</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mask</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/transformations.html#shift_subtract"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.transformations.shift_subtract" title="Permalink to this definition"></a></dt>
<dd><p>Use Fourier Shift theorem for subpixel shifts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>params</strong> – tuple
xshift, yshift, beta</p></li>
<li><p><strong>reference</strong> – nd array
See align_fourierLSQ</p></li>
<li><p><strong>target</strong> – nd array
See align_fourierLSQ</p></li>
<li><p><strong>mask</strong> – nd array, optional
See align_fourierLSQ</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>1D nd array of target-reference residual after
applying shift and intensity fraction.</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-pancake.utilities">
<span id="pancake-utilities-module"></span><h2>pancake.utilities module<a class="headerlink" href="#module-pancake.utilities" title="Permalink to this headline"></a></h2>
<dl class="py function">
<dt class="sig sig-object py" id="pancake.utilities.compute_magnitude">
<span class="sig-prename descclassname"><span class="pre">pancake.utilities.</span></span><span class="sig-name descname"><span class="pre">compute_magnitude</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spectrum_wave</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spectrum_flux</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wave_unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'micron'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flux_unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mJy'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/utilities.html#compute_magnitude"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.utilities.compute_magnitude" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.utilities.convert_spt_to_pandeia">
<span class="sig-prename descclassname"><span class="pre">pancake.utilities.</span></span><span class="sig-name descname"><span class="pre">convert_spt_to_pandeia</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">raw_spectral_type</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/utilities.html#convert_spt_to_pandeia"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.utilities.convert_spt_to_pandeia" title="Permalink to this definition"></a></dt>
<dd><p>Function to take a spectral type string, either from Simbad or directly from the user, and return an approximation
that Pandeia can use. If the spectral type string cannot be understood, then the spectral type will be assumed as A0V</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.utilities.determine_pandeia_offset">
<span class="sig-prename descclassname"><span class="pre">pancake.utilities.</span></span><span class="sig-name descname"><span class="pre">determine_pandeia_offset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/utilities.html#determine_pandeia_offset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.utilities.determine_pandeia_offset" title="Permalink to this definition"></a></dt>
<dd><p>Uses Pandeia’s PSF library to determine which PSF offset pandeia would use for a particular
configuration (for comparison with the offset that pancake would use in on-the-fly PSF
generation).</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.utilities.equatorial_to_ecliptic">
<span class="sig-prename descclassname"><span class="pre">pancake.utilities.</span></span><span class="sig-name descname"><span class="pre">equatorial_to_ecliptic</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ra</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dec</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">form</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/utilities.html#equatorial_to_ecliptic"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.utilities.equatorial_to_ecliptic" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.utilities.normalise_spectrum">
<span class="sig-prename descclassname"><span class="pre">pancake.utilities.</span></span><span class="sig-name descname"><span class="pre">normalise_spectrum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input_wave</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">input_flux</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">norm_val</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">norm_unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'vegamag'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">norm_bandpass</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'2mass_ks'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/utilities.html#normalise_spectrum"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.utilities.normalise_spectrum" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.utilities.normalize_spectrum">
<span class="sig-prename descclassname"><span class="pre">pancake.utilities.</span></span><span class="sig-name descname"><span class="pre">normalize_spectrum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/utilities.html#normalize_spectrum"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.utilities.normalize_spectrum" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.utilities.optimise_readout">
<span class="sig-prename descclassname"><span class="pre">pancake.utilities.</span></span><span class="sig-name descname"><span class="pre">optimise_readout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">obs_dict</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">t_exp</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">optimise_margin</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_sat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-06</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_sat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/utilities.html#optimise_readout"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.utilities.optimise_readout" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.utilities.optimize_readout">
<span class="sig-prename descclassname"><span class="pre">pancake.utilities.</span></span><span class="sig-name descname"><span class="pre">optimize_readout</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/utilities.html#optimize_readout"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.utilities.optimize_readout" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.utilities.pandeia_spectrum">
<span class="sig-prename descclassname"><span class="pre">pancake.utilities.</span></span><span class="sig-name descname"><span class="pre">pandeia_spectrum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stellar_type</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/utilities.html#pandeia_spectrum"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.utilities.pandeia_spectrum" title="Permalink to this definition"></a></dt>
<dd><p>Generate a spectrum using the Pandeia Phoenix data files.
Returns two arrays containing the wavelength and flux values, unormalised.</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.utilities.query_simbad">
<span class="sig-prename descclassname"><span class="pre">pancake.utilities.</span></span><span class="sig-name descname"><span class="pre">query_simbad</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">query_string</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">query_timeout_sec</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">default_spt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'a0v'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/utilities.html#query_simbad"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.utilities.query_simbad" title="Permalink to this definition"></a></dt>
<dd><p>Query simbad for details on a target object, adapted from the JWST Coronagraphic Visibility Tool
Will in current state attempt to extract: RA, Dec, Spectral Type and Kmagnitude</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.utilities.stellar_spectrum">
<span class="sig-prename descclassname"><span class="pre">pancake.utilities.</span></span><span class="sig-name descname"><span class="pre">stellar_spectrum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">stellar_type</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bandpass</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">magnitude</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/utilities.html#stellar_spectrum"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.utilities.stellar_spectrum" title="Permalink to this definition"></a></dt>
<dd><p>Create a spectrum dictionary that assumes a Phoenix model with a key found in pandeia, and set
the magnitude to the provided value in the provided bandpass (in ABMAG)</p>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="pancake.utilities.user_spectrum">
<span class="sig-prename descclassname"><span class="pre">pancake.utilities.</span></span><span class="sig-name descname"><span class="pre">user_spectrum</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wave_unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'micron'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flux_unit</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'mJy'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/pancake/utilities.html#user_spectrum"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#pancake.utilities.user_spectrum" title="Permalink to this definition"></a></dt>
<dd><p>Read in a user spectrum from a specified file.</p>
</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="postprocessing.html" class="btn btn-neutral float-left" title="Postprocessing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Aarynn Carter.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>