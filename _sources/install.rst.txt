.. Installation guide for PanCAKE


Installation 
============

To begin, it is strongly advised that you separate your PanCAKE installation within an `Anaconda <https://www.anaconda.com/products/individual>`_ environment. This is a flexible way to manage many Python environments at once to ensure packages don't clash, and that the installation of a new package doesn't break your entire Python installation. 

To initialise an Anaconda environment for PanCAKE use the following::

	conda create -n pcake python=3.7

Note that Python 3.7 is being used specifically to avoid errors in dependency packages that arise with later versions of Python - this may change in the near future. 

With the environment created, enter it ::

	conda activate pcake

and install the PanCAKE package and all relevant dependencies ::

	pip install git+https://github.com/AarynnCarter/PanCAKE.git


Necessary Data Files
^^^^^^^^^^^^^^^^^^^^

PanCAKE makes use of the `Pandeia <https://pypi.org/project/pandeia.engine/>`_, `WebbPSF <https://webbpsf.readthedocs.io/en/latest/>`_, and `synphot <https://synphot.readthedocs.io/en/latest/>`_ packages that require their own separate data files. You may find that certain aspects of PanCAKE will work without some of these data files, but to access all of PanCAKE's functionality, they must be downloaded.

| **Pandeia:** `https://stsci.app.box.com/v/pandeia-refdata-v2p0-jwst <https://stsci.app.box.com/v/pandeia-refdata-v2p0-jwst>`_ (~4 GB)
| **WebbPSF:** `webbpsf-data-1.1.1.tar.gz <https://stsci.box.com/shared/static/t90gqazqs82d8nh25249oq1obbjfstq8.gz>`_ (~100 MB, Direct Download Link)
| **Synphot Throughputs:** `synphot1_throughput-master.tar <https://archive.stsci.edu/hlsps/reference-atlases/hlsp_reference-atlases_hst_multi_everything_multi_v11_sed.tar>`_ (~1 GB, Direct Download Link)
| **Synphot Spectra:** `synphot5_phoenix-models.tar <https://archive.stsci.edu/hlsps/reference-atlases/hlsp_reference-atlases_hst_multi_pheonix-models_multi_v3_synphot5.tar>`_ (~2 GB, Direct Download Link)
| **Synphot Calibration:** `synphot6_calibration-spectra.tar <https://archive.stsci.edu/hlsps/reference-atlases/hlsp_reference-atlases_hst_multi_calibration-spectra_multi_v5_synphot6.tar>`_ (~4 GB, Direct Download Link, or manually add the alpha_lyr_stis file from `here <https://archive.stsci.edu/hlsps/reference-atlases/cdbs/current_calspec/>`_)

Put these folders somewhere sensible on your hard drive, making sure you combine the Synphot files. Also 

Finally adjust your ~/.bashrc file to include the following lines (adjusted accordingly to where you saved the above)::

	export pandeia_refdata="/path/to/pandeia/data/directory"
	export WEBBPSF_PATH="/path/to/webbpsf/data/directory"
	export PYSYN_CDBS="/path/to/synphot/data/redcat/trds"

**NOTE:** The final export must map directly to the /redcat/trds/ directory, and *not* the encompassing /grp/ directory.

With all the above done, you should have everything you need to start using PanCAKE!